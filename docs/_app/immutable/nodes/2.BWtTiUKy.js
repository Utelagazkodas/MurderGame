import{a as w,t as S,d as B,c as Le}from"../chunks/disclose-version.KCFXmJnZ.js";import{h as I,z as je,b as Be,y as He,aa as ke,H as ze,A as ce,B as fe,C as J,f as $,a6 as Fe,ac as z,D as xe,d as we,F as Ye,v as de,ad as Ke,ae as Ge,a9 as Je,af as Pe,e as qe,$ as We,I as Xe,k as ve,ag as Qe,ah as Ze,ai as er,a4 as rr,aj as tr,x as ar,ak as nr,al as sr,am as or,a as ir,an as lr,p as cr,i as fr,q as M,t as T,ao as ue,W as P,Y as E,X as q,g as H,V as _e}from"../chunks/runtime.qgzTVW-P.js";import{a as dr,l as vr,d as ur,e as _r,s as he}from"../chunks/render.DZ9a-FsG.js";import{s as hr,i as N,p as pr,a as pe}from"../chunks/store.0YlUkalQ.js";import{o as gr}from"../chunks/index-client.0A_dy4mZ.js";import{w as ye}from"../chunks/index.zR3LeMTC.js";function mr(e,r){return r}function br(e,r,t,s){for(var a=[],n=r.length,c=0;c<n;c++)Ge(r[c].e,a,!0);var h=n>0&&a.length===0&&t!==null;if(h){var _=t.parentNode;Je(_),_.append(t),s.clear(),O(e,r[0].prev,r[n-1].next)}Pe(a,()=>{for(var m=0;m<n;m++){var p=r[m];h||(s.delete(p.k),O(e,p.prev,p.next)),qe(p.e,!h)}})}function kr(e,r,t,s,a,n=null){var c=e,h={flags:r,items:new Map,first:null};I&&je();var _=null,m=!1;Be(()=>{var p=t(),l=He(p)?p:p==null?[]:ke(p),u=l.length;if(m&&u===0)return;m=u===0;let f=!1;if(I){var d=c.data===ze;d!==(u===0)&&(c=ce(),fe(c),J(!1),f=!0)}if(I){for(var b=null,y,i=0;i<u;i++){if($.nodeType===8&&$.data===Fe){c=$,f=!0,J(!1);break}var o=l[i],v=s(o,i);y=Ae($,h,b,null,o,v,i,a,r),h.items.set(v,y),b=y}u>0&&fe(ce())}if(!I){var k=We;xr(l,h,c,a,r,(k.f&z)!==0,s)}n!==null&&(u===0?_?xe(_):_=we(()=>n(c)):_!==null&&Ye(_,()=>{_=null})),f&&J(!0),t()}),I&&(c=$)}function xr(e,r,t,s,a,n,c,h){var _=e.length,m=r.items,p=r.first,l=p,u,f=null,d=[],b=[],y,i,o,v;for(v=0;v<_;v+=1){if(y=e[v],i=c(y,v),o=m.get(i),o===void 0){var k=l?l.e.nodes_start:t;f=Ae(k,r,f,f===null?r.first:f.next,y,i,v,s,a),m.set(i,f),d=[],b=[],l=f.next;continue}if(wr(o,y,v),o.e.f&z&&xe(o.e),o!==l){if(u!==void 0&&u.has(o)){if(d.length<b.length){var x=b[0],A;f=x.prev;var U=d[0],R=d[d.length-1];for(A=0;A<d.length;A+=1)ge(d[A],x,t);for(A=0;A<b.length;A+=1)u.delete(b[A]);O(r,U.prev,R.next),O(r,f,U),O(r,R,x),l=x,f=R,v-=1,d=[],b=[]}else u.delete(o),ge(o,l,t),O(r,o.prev,o.next),O(r,o,f===null?r.first:f.next),O(r,f,o),f=o;continue}for(d=[],b=[];l!==null&&l.k!==i;)(n||!(l.e.f&z))&&(u??(u=new Set)).add(l),b.push(l),l=l.next;if(l===null)continue;o=l}d.push(o),f=o,l=o.next}if(l!==null||u!==void 0){for(var V=u===void 0?[]:ke(u);l!==null;)(n||!(l.e.f&z))&&V.push(l),l=l.next;var L=V.length;if(L>0){var Y=null;br(r,V,Y,m)}}de.first=r.first&&r.first.e,de.last=f&&f.e}function wr(e,r,t,s){Ke(e.v,r),e.i=t}function Ae(e,r,t,s,a,n,c,h,_,m){var p=(_&Ze)!==0,l=(_&er)===0,u=p?l?Xe(a):ve(a):a,f=_&Qe?ve(c):c,d={i:f,v:u,k:n,a:null,e:null,prev:t,next:s};try{return d.e=we(()=>h(e,u,f),I),d.e.prev=t&&t.e,d.e.next=s&&s.e,t===null?r.first=d:(t.next=d,t.e.next=d.e),s!==null&&(s.prev=d,s.e.prev=d.e),d}finally{}}function ge(e,r,t){for(var s=e.next?e.next.e.nodes_start:t,a=r?r.e.nodes_start:t,n=e.e.nodes_start;n!==s;){var c=rr(n);a.before(n),n=c}}function O(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function yr(e){if(I){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var s=e.value;ee(e,"value",null),e.value=s}if(e.hasAttribute("checked")){var a=e.checked;ee(e,"checked",null),e.checked=a}}};e.__on_r=t,tr(t),dr()}}function ee(e,r,t,s){var a=e.__attributes??(e.__attributes={});I&&(a[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||a[r]!==(a[r]=t)&&(r==="style"&&"__styles"in e&&(e.__styles={}),r==="loading"&&(e[nr]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Ar(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var me=new Map;function Ar(e){var r=me.get(e.nodeName);if(r)return r;me.set(e.nodeName,r=[]);for(var t,s=e,a=Element.prototype;a!==s;){t=sr(s);for(var n in t)t[n].set&&r.push(n);s=ar(s)}return r}function Er(e,r,t=r){var s=or();vr(e,"input",a=>{var n=a?e.defaultValue:e.value;if(n=W(e)?X(n):n,t(n),s&&n!==(n=r())){var c=e.selectionStart,h=e.selectionEnd;e.value=n??"",h!==null&&(e.selectionStart=c,e.selectionEnd=Math.min(h,e.value.length))}}),(I&&e.defaultValue!==e.value||ir(r)==null&&e.value)&&t(W(e)?X(e.value):e.value),lr(()=>{var a=r();W(e)&&a===X(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function W(e){var r=e.type;return r==="number"||r==="range"}function X(e){return e===""?null:+e}let Q=ye(void 0),Z=ye(void 0),F="http://0.0.0.0:3000/";async function Ir(){let e=await fetch(`http://${window.location.hostname}:${window.location.port}/ip.json`);e.ok&&(F=JSON.parse(await e.text()))}/*! typescript-cookie v1.0.6 | MIT */const Ee=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ie=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),te=decodeURIComponent,ae=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function Cr(e){return e=Object.assign({},e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires!=null&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([r,t])=>t!=null&&t!==!1).map(([r,t])=>t===!0?`; ${r}`:`; ${r}=${t.split(";")[0]}`).join("")}function Ce(e,r,t){const s=/(?:^|; )([^=]*)=([^;]*)/g,a={};let n;for(;(n=s.exec(document.cookie))!=null;)try{const c=t(n[1]);if(a[c]=r(n[2],c),e===c)break}catch{}return e!=null?a[e]:a}const be=Object.freeze({decodeName:te,decodeValue:ae,encodeName:Ee,encodeValue:Ie}),ne=Object.freeze({path:"/"});function se(e,r,t=ne,{encodeValue:s=Ie,encodeName:a=Ee}={}){return document.cookie=`${a(e)}=${s(r,e)}${Cr(t)}`}function Te(e,{decodeValue:r=ae,decodeName:t=te}={}){return Ce(e,r,t)}function Tr({decodeValue:e=ae,decodeName:r=te}={}){return Ce(void 0,e,r)}function Oe(e,r=ne){se(e,"",Object.assign({},r,{expires:-1}))}function re(e,r){const t={set:function(a,n,c){return se(a,n,Object.assign({},this.attributes,c),{encodeValue:this.converter.write})},get:function(a){if(arguments.length===0)return Tr(this.converter.read);if(a!=null)return Te(a,this.converter.read)},remove:function(a,n){Oe(a,Object.assign({},this.attributes,n))},withAttributes:function(a){return re(this.converter,Object.assign({},this.attributes,a))},withConverter:function(a){return re(Object.assign({},this.converter,a),this.attributes)}},s={attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}};return Object.create(t,s)}re({read:be.decodeValue,write:be.encodeValue},ne);var Or=S('<form><input type="text" placeholder="írd ide a kódot"></form>'),Nr=(e,r,t)=>{r(e,T(t))},Dr=S("<button>megölés</button>"),Sr=S("él <!>",1),Ur=S("<br> <!>",1),Rr=S('<button>Kilépés</button> <br> <!> <br> <!> <hr> <button aria-label="Refresh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-refresh-cw"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path><path d="M21 3v5h-5"></path><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path><path d="M8 16H3v5"></path></svg></button> <!>',1),Vr=S('<div class="w-screen h-screen flex place-content-center items-center bg-gray-800"><div class="max-w-screen max-h-screen bg-gray-700 rounded-2xl p-6 m-5 h-[90vh] aspect-9/16 md:aspect-13/16 border border-gray-400 text-gray-200"><div>W6 (+Léna) gyilkosos játék dolog</div> <!> <!></div></div>');function zr(e,r){cr(r,!0);const t=hr(),s=()=>pe(Z,"$otherUsers",t),a=()=>pe(Q,"$thisUser",t);let n=ue(""),c=ue(!1);gr(()=>{Ir();let i=Te("id");i&&(M(n,pr(i)),h())});let h=async i=>{if(i&&i.preventDefault(),T(n).length==16){let o=await fetch(F+"id/"+T(n));if(o.ok){let v=await o.text();M(c,!0),Q.set(JSON.parse(v)),se("id",T(n)),_()}}},_=async i=>{var v;i&&i.preventDefault();let o=await fetch(F+"players");if(o.ok){let k=await o.text();if(Z.set(JSON.parse(k)),s())for(let x=0;x<s().length;x++)((v=a())==null?void 0:v.publicID)==s()[x].publicID&&s().splice(x,1)}},m=async(i,o)=>{var k;i.preventDefault(),(await fetch(F+"kill/"+o.publicID,{method:"POST",body:(k=a())==null?void 0:k.id})).ok||console.error(`error killing ${o.name}`),_(i)},p=i=>{i&&i.preventDefault(),Q.set(void 0),Z.set(void 0),M(n,""),M(c,!1),Oe("id")};var l=Vr(),u=P(l),f=E(P(u),2);{var d=i=>{var o=Or(),v=P(o);yr(v),ee(v,"maxlength",16),q(o),_r("submit",o,h),Er(v,()=>T(n),k=>M(n,k)),w(i,o)};N(f,i=>{T(c)||i(d)})}var b=E(f,2);{var y=i=>{var o=Rr(),v=H(o);v.__click=p;var k=E(v,3),x=E(k);{var A=g=>{var C=B("halott vagy:(");w(g,C)};N(x,g=>{a().alive||g(A)})}var U=E(x,4);{var R=g=>{var C=B("NEM te vagy a gyilkos");w(g,C)},V=g=>{var C=B("TE VAGY A GYILKOS");w(g,C)};N(U,g=>{a().isKiller?g(V,!1):g(R)})}var L=E(U,4);L.__click=_;var Y=E(L,2);{var Ne=g=>{var C=Le(),De=H(C);kr(De,1,s,mr,(Se,K)=>{var oe=Ur(),ie=E(H(oe)),Ue=E(ie);{var Re=D=>{var j=Sr(),$e=E(H(j));{var Me=G=>{var le=Dr();le.__click=[Nr,m,K],w(G,le)};N($e,G=>{a().isKiller&&G(Me)})}w(D,j)},Ve=D=>{var j=B("HALOTT");w(D,j)};N(Ue,D=>{T(K).alive?D(Re):D(Ve,!1)})}_e(()=>he(ie,` ${T(K).name??""} `)),w(Se,oe)}),w(g,C)};N(Y,g=>{s()&&g(Ne)})}_e(()=>he(k,` Szia ${a().name??""} `)),w(i,o)};N(b,i=>{a()&&i(y)})}q(u),q(l),w(e,l),fr()}ur(["click"]);export{zr as component};
