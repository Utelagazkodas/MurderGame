import{a as y,b as O,d as ce}from"../chunks/disclose-version.CPNj8Zwm.js";import{h as U,O as de,X as Fe,W as Ye,L as Ge,d as Je,K as Xe,ab as $e,M as Ke,N as Ee,P as fe,i as ee,a7 as qe,ad as ie,Q as Re,f as Ue,R as Qe,H as Ae,ae as We,af as Ze,aa as er,ag as rr,g as tr,a0 as ar,V as nr,C as Ne,ah as sr,ai as ir,aj as lr,a5 as or,ak as cr,J as dr,al as fr,am as vr,an as ur,b as me,ao as _r,p as pr,m as gr,F as H,t as p,j as D,ap as ve,y as I,z as b,k as X,x as K,a as hr}from"../chunks/runtime.CBkhX0eM.js";import{a as mr,l as br,d as xr,e as kr,s as G}from"../chunks/render.DNwhpByi.js";import{s as wr,i as B,p as je,a as yr,b as ue}from"../chunks/store.CtdzTLrT.js";import{o as Ir}from"../chunks/index-client.V6rqSZkl.js";import{w as ke}from"../chunks/index.BPQZt_yL.js";function De(e,r){return r}function Cr(e,r,t,n){for(var a=[],s=r.length,i=0;i<s;i++)Ze(r[i].e,a,!0);var x=s>0&&a.length===0&&t!==null;if(x){var _=t.parentNode;er(_),_.append(t),n.clear(),P(e,r[0].prev,r[s-1].next)}rr(a,()=>{for(var h=0;h<s;h++){var C=r[h];x||(n.delete(C.k),P(e,C.prev,C.next)),tr(C.e,!x)}})}function Oe(e,r,t,n,a,s=null){var i=e,x={flags:r,items:new Map,first:null};{var _=e;i=U?de(Fe(_)):_.appendChild(Ye())}U&&Ge();var h=null,C=!1;Je(()=>{var l=t(),m=Xe(l)?l:l==null?[]:$e(l),d=m.length;if(C&&d===0)return;C=d===0;let f=!1;if(U){var A=i.data===Ke;A!==(d===0)&&(i=Ee(),de(i),fe(!1),f=!0)}if(U){for(var z=null,V,v=0;v<d;v++){if(ee.nodeType===8&&ee.data===qe){i=ee,f=!0,fe(!1);break}var N=m[v],o=n(N,v);V=ze(ee,x,z,null,N,o,v,a,r),x.items.set(o,V),z=V}d>0&&de(Ee())}if(!U){var c=ar;Er(m,x,i,a,r,(c.f&ie)!==0,n)}s!==null&&(d===0?h?Re(h):h=Ue(()=>s(i)):h!==null&&Qe(h,()=>{h=null})),f&&fe(!0),t()}),U&&(i=ee)}function Er(e,r,t,n,a,s,i,x){var _=e.length,h=r.items,C=r.first,l=C,m,d=null,f=[],A=[],z,V,v,N;for(N=0;N<_;N+=1){if(z=e[N],V=i(z,N),v=h.get(V),v===void 0){var o=l?l.e.nodes_start:t;d=ze(o,r,d,d===null?r.first:d.next,z,V,N,n,a),h.set(V,d),f=[],A=[],l=d.next;continue}if(Ar(v,z,N),v.e.f&ie&&Re(v.e),v!==l){if(m!==void 0&&m.has(v)){if(f.length<A.length){var c=A[0],u;d=c.prev;var T=f[0],k=f[f.length-1];for(u=0;u<f.length;u+=1)Te(f[u],c,t);for(u=0;u<A.length;u+=1)m.delete(A[u]);P(r,T.prev,k.next),P(r,d,T),P(r,k,c),l=c,d=k,N-=1,f=[],A=[]}else m.delete(v),Te(v,l,t),P(r,v.prev,v.next),P(r,v,d===null?r.first:d.next),P(r,d,v),d=v;continue}for(f=[],A=[];l!==null&&l.k!==V;)(s||!(l.e.f&ie))&&(m??(m=new Set)).add(l),A.push(l),l=l.next;if(l===null)continue;v=l}f.push(v),d=v,l=v.next}if(l!==null||m!==void 0){for(var w=m===void 0?[]:$e(m);l!==null;)(s||!(l.e.f&ie))&&w.push(l),l=l.next;var q=w.length;if(q>0){var F=_===0?t:null;Cr(r,w,F,h)}}Ae.first=r.first&&r.first.e,Ae.last=d&&d.e}function Ar(e,r,t,n){We(e.v,r),e.i=t}function ze(e,r,t,n,a,s,i,x,_,h){var C=(_&ir)!==0,l=(_&lr)===0,m=C?l?nr(a):Ne(a):a,d=_&sr?Ne(i):i,f={i:d,v:m,k:s,a:null,e:null,prev:t,next:n};try{return f.e=Ue(()=>x(e,m,d),U),f.e.prev=t&&t.e,f.e.next=n&&n.e,t===null?r.first=f:(t.next=f,t.e.next=f.e),n!==null&&(n.prev=f,n.e.prev=f.e),f}finally{}}function Te(e,r,t){for(var n=e.next?e.next.e.nodes_start:t,a=r?r.e.nodes_start:t,s=e.e.nodes_start;s!==n;){var i=or(s);a.before(s),s=i}}function P(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Nr(e){if(U){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var n=e.value;be(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var a=e.checked;be(e,"checked",null),e.checked=a}}};e.__on_r=t,cr(t),mr()}}function be(e,r,t,n){var a=e.__attributes??(e.__attributes={});U&&(a[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||a[r]!==(a[r]=t)&&(r==="style"&&"__styles"in e&&(e.__styles={}),r==="loading"&&(e[fr]=t),t==null?e.removeAttribute(r):typeof t!="string"&&jr(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var Se=new Map;function jr(e){var r=Se.get(e.nodeName);if(r)return r;Se.set(e.nodeName,r=[]);for(var t,n=e,a=Element.prototype;a!==n;){t=vr(n);for(var s in t)t[s].set&&r.push(s);n=dr(n)}return r}function Dr(e,r,t=r){var n=ur();br(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=_e(e)?pe(s):s,t(s),n&&s!==(s=r())){var i=e.selectionStart,x=e.selectionEnd;e.value=s??"",x!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(x,e.value.length))}}),(U&&e.defaultValue!==e.value||me(r)==null&&e.value)&&t(_e(e)?pe(e.value):e.value),_r(()=>{var a=r();_e(e)&&a===pe(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function _e(e){var r=e.type;return r==="number"||r==="range"}function pe(e){return e===""?null:+e}let se=ke(void 0),ge=ke(!1),he=ke(void 0),re="http://0.0.0.0:3000/";async function Or(){let e=await fetch("./ip");e.ok&&(re=await e.text())}/*! typescript-cookie v1.0.6 | MIT */const Me=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Be=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),we=decodeURIComponent,ye=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function Tr(e){return e=Object.assign({},e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires!=null&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([r,t])=>t!=null&&t!==!1).map(([r,t])=>t===!0?`; ${r}`:`; ${r}=${t.split(";")[0]}`).join("")}function Le(e,r,t){const n=/(?:^|; )([^=]*)=([^;]*)/g,a={};let s;for(;(s=n.exec(document.cookie))!=null;)try{const i=t(s[1]);if(a[i]=r(s[2],i),e===i)break}catch{}return e!=null?a[e]:a}const Ve=Object.freeze({decodeName:we,decodeValue:ye,encodeName:Me,encodeValue:Be}),Ie=Object.freeze({path:"/"});function Ce(e,r,t=Ie,{encodeValue:n=Be,encodeName:a=Me}={}){return document.cookie=`${a(e)}=${n(r,e)}${Tr(t)}`}function He(e,{decodeValue:r=ye,decodeName:t=we}={}){return Le(e,r,t)}function Sr({decodeValue:e=ye,decodeName:r=we}={}){return Le(void 0,e,r)}function Pe(e,r=Ie){Ce(e,"",Object.assign({},r,{expires:-1}))}function xe(e,r){const t={set:function(a,s,i){return Ce(a,s,Object.assign({},this.attributes,i),{encodeValue:this.converter.write})},get:function(a){if(arguments.length===0)return Sr(this.converter.read);if(a!=null)return He(a,this.converter.read)},remove:function(a,s){Pe(a,Object.assign({},this.attributes,s))},withAttributes:function(a){return xe(this.converter,Object.assign({},this.attributes,a))},withConverter:function(a){return xe(Object.assign({},this.converter,a),this.attributes)}},n={attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}};return Object.create(t,n)}xe({read:Ve.decodeValue,write:Ve.encodeValue},Ie);var Vr=O('<form class="text-gray-700"><input type="text" placeholder="írd ide a kódot" class="rounded-xl"></form>'),$r=O('viszont <span class="font-bold text-red-700">halott vagy</span> :(',1),Rr=O('<span class="text-green-300">Nem te vagy a gyilkos</span> <!>',1),Ur=(e,r,t)=>{p(r)&&(t(e,p(r)),H(r,void 0))},zr=(e,r)=>{H(r,void 0)},Mr=O(`<span class="text-red-400">TE VAGY A GYILKOS</span> screenshotold le
        -> <button class="text-blue-300">kép</button> <br> ezzel tudsz majd ölni, és egy pár órával utána itt öld meg a piros X-el amikor
        bejelenti <dialog class="overflow-hidden top-0 h-screen w-screen bg-gray-900/65 backdrop-blur text-right"><div class="relative h-screen w-auto mx-auto flex justify-center"><img src="/stone.jpeg" class="z-10 h-screen w-auto object-contain p-2 rounded-2xl" alt="stone"> <button aria-label="close" class="absolute top-2 right-2 z-20 p-0.5 rounded"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-gray-200"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button></div></dialog> <dialog class="top-0 bg-transparent"><div class="w-screen top-0 h-screen backdrop-blur bg-gray-900/65 flex items-center justify-center"><div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200">Biztos meg akarod ölni? <br> <div class="*:rounded *:border-2 *:p-1"><button class="bg-red-500">IGEN</button> <button class="bg-green-500"> </button></div></div></div></dialog>`,1),Br=(e,r,t,n)=>{p(r)==null&&t(e,p(n))},Lr=O('<button aria-label="kill" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-red-500 rounded-full border-2 border-red-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>'),Hr=O('<div class="bg-green-500 flex justify-center"><span class="mr-2"> </span> <!></div>'),Pr=O('<div class="bg-red-500"> </div>'),Fr=O('<div class="flex flex-col items-center text-lg *:w-full *:m-2 text-center *:rounded-full *:border-2 *:p-0.5"></div>'),Yr=O('<div class="w-full flex justify-between text-lg"> <button aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button></div> <br> <!> <!>',1),Gr=O('<div class="bg-green-500 flex justify-center"><span class="mr-2"> </span></div>'),Jr=O('<div class="bg-red-500"> </div>'),Xr=O('<div class="flex flex-col items-center text-lg *:w-full *:m-2 text-center *:rounded-full *:border-2 *:p-0.5"></div>'),Kr=O('<div class="max-w-screen h-screen bg-gray-600 p-5"><!> <!></div>');function tt(e,r){pr(r,!0);const t=wr(),n=()=>ue(se,"$thisUser",t),a=()=>ue(ge,"$killerPopup",t),s=()=>ue(he,"$otherUsers",t);let i=ve(""),x=ve(!1),_=ve(void 0),h;Ir(async()=>{await Or();let o=He("id");l(),o&&(H(i,je(o)),C())});let C=async o=>{if(o&&o.preventDefault(),p(i).length==16){let c=await fetch(re+"id/"+p(i));if(c.ok){let u=await c.text();H(x,!0),se.set(JSON.parse(u)),Ce("id",p(i)),l(),h=setInterval(l,5e3)}}},l=async o=>{var u;o&&o.preventDefault();let c;if(n()&&n().id!=null?c=await fetch(`${re}players/${n().id}`):c=await fetch(re+"players"),c.ok){let T=await c.text(),k=JSON.parse(T);if(k){for(let w=0;w<k.length;w++)((u=n())==null?void 0:u.publicID)==k[w].publicID&&(yr(se,me(n).alive=k[w].alive,me(n)),k.splice(w,1));he.set(k)}}},m=async(o,c)=>{var u;o.preventDefault(),p(_)==null||p(_).publicID!=c.publicID?H(_,je(c)):((await fetch(re+"kill/"+c.publicID,{method:"POST",body:(u=n())==null?void 0:u.id})).ok||console.error(`error killing ${c.name}`),l(o))},d=o=>{o&&o.preventDefault(),se.set(void 0),he.set(void 0),H(i,""),H(x,!1),Pe("id"),clearInterval(h),l()};var f=Kr(),A=I(f);{var z=o=>{var c=Vr(),u=I(c);Nr(u),be(u,"maxlength",16),b(c),kr("submit",c,C),Dr(u,()=>p(i),T=>H(i,T)),y(o,c)};B(A,o=>{p(x)||o(z)})}var V=D(A,2);{var v=o=>{var c=Yr(),u=X(c),T=I(u),k=D(T);k.__click=d,b(u);var w=D(u,4);{var q=S=>{var $=Rr(),j=D(X($),2);{var g=E=>{var Y=$r();hr(2),y(E,Y)};B(j,E=>{n().alive||E(g)})}y(S,$)},F=S=>{var $=Mr(),j=D(X($),2);j.__click=()=>{ge.set(!a())};var g=D(j,4),E=I(g),Y=D(I(E),2);Y.__click=()=>{ge.set(!a())},b(E),b(g);var Q=D(g,2),ae=I(Q),M=I(ae),R=D(I(M),2),L=D(R),ne=I(L);ne.__click=[Ur,_,m];var W=D(ne,2);W.__click=[zr,_];var oe=I(W);b(W),b(L),b(M),b(ae),b(Q),K(()=>{var J,Z;g.open=a(),Q.open=p(_)!=null&&a()==!1,G(R,` Szerintem ${((J=p(_))==null?void 0:J.name)??""} nagyon szomorú
              lenne `),G(oe,`Nem, mert egy jó ember vagyok és meg akarom kímélni ${((Z=p(_))==null?void 0:Z.name)??""}
                  életét`)}),y(S,$)};B(w,S=>{n().isKiller?S(F,!1):S(q)})}var te=D(w,2);{var le=S=>{var $=Fr();Oe($,5,s,De,(j,g)=>{var E=ce(),Y=X(E);{var Q=M=>{var R=Hr(),L=I(R),ne=I(L);b(L);var W=D(L,2);{var oe=J=>{var Z=Lr();Z.__click=[Br,_,m,g],y(J,Z)};B(W,J=>{n().isKiller&&J(oe)})}b(R),K(()=>G(ne,`${p(g).name??""} (alias ${p(g).nickname??""})`)),y(M,R)},ae=M=>{var R=Pr(),L=I(R);b(R),K(()=>G(L,`${p(g).name??""} (alias ${p(g).nickname??""})`)),y(M,R)};B(Y,M=>{p(g).alive?M(Q):M(ae,!1)})}y(j,E)}),b($),y(S,$)};B(te,S=>{s()&&S(le)})}K(()=>G(T,`Szia ${n().name??""} `)),y(o,c)},N=o=>{var c=ce(),u=X(c);{var T=k=>{var w=Xr();Oe(w,5,s,De,(q,F)=>{var te=ce(),le=X(te);{var S=j=>{var g=Gr(),E=I(g),Y=I(E,!0);b(E),b(g),K(()=>G(Y,p(F).nickname)),y(j,g)},$=j=>{var g=Jr(),E=I(g,!0);b(g),K(()=>G(E,p(F).nickname)),y(j,g)};B(le,j=>{p(F).alive?j(S):j($,!1)})}y(q,te)}),b(w),y(k,w)};B(u,k=>{s()&&k(T)},!0)}y(o,c)};B(V,o=>{n()?o(v):o(N,!1)})}b(f),y(e,f),gr()}xr(["click"]);export{tt as component};
