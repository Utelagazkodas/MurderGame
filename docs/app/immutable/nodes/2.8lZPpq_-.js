import{d as Q,a as c,t as P,e as oe,n as Ae}from"../chunks/C8VbkOX1.js";import{q as G,O as de,ae as Je,ao as Qe,J as Ze,I as We,H as $e,am as Ne,M as ea,N as Se,P as ce,V as te,ai as aa,as as ve,Q as He,R as Be,T as ta,F as Pe,at as De,au as ra,al as la,av as na,ap as ia,aa as sa,X as oa,B as Ee,aw as _e,ax as xe,ay as va,ag as da,az as Ue,ab as ca,aA as ua,aB as fa,b as ga,aC as ma,p as he,y as q,i as be,s as w,j as x,k as m,t as L,g as Z,aD as re,D as Ce,aE as _a}from"../chunks/CJR8sh4W.js";import{l as xa,d as pe,s as R,e as ha}from"../chunks/DR52M7lB.js";import{s as ye,i as H,a as O}from"../chunks/c6B5rUVk.js";import{s as me,a as ba,r as pa,b as ya}from"../chunks/BJwEh_PS.js";import{g as le,u as ke,k as ka,a as $,f as ue,i as ne,v as wa,b as Ta,l as Ma,c as Sa,d as Pa}from"../chunks/BJP9fcd9.js";import{d as Ie,w as Ke}from"../chunks/BM41IADg.js";import{P as Da}from"../chunks/C0h8TzzD.js";function Le(t,e){return e}function Ea(t,e,l,a){for(var r=[],v=e.length,u=0;u<v;u++)ra(e[u].e,r,!0);var b=v>0&&r.length===0&&l!==null;if(b){var M=l.parentNode;la(M),M.append(l),a.clear(),X(t,e[0].prev,e[v-1].next)}na(r,()=>{for(var K=0;K<v;K++){var k=e[K];b||(a.delete(k.k),X(t,k.prev,k.next)),ia(k.e,!b)}})}function Re(t,e,l,a,r,v=null){var u=t,b={flags:e,items:new Map,first:null},M=(e&Ue)!==0;if(M){var K=t;u=G?de(Je(K)):K.appendChild(Qe())}G&&Ze();var k=null,D=!1;We(()=>{var E=l(),i=$e(E)?E:E==null?[]:Ne(E),s=i.length;if(D&&s===0)return;D=s===0;let g=!1;if(G){var B=u.data===ea;B!==(s===0)&&(u=Se(),de(u),ce(!1),g=!0)}if(G){for(var S=null,p,y=0;y<s;y++){if(te.nodeType===8&&te.data===aa){u=te,g=!0,ce(!1);break}var C=i[y],d=a(C,y);p=Ve(te,b,S,null,C,d,y,r,e),b.items.set(d,p),S=p}s>0&&de(Se())}if(!G){var n=sa;Ca(i,b,u,r,e,(n.f&ve)!==0,a)}v!==null&&(s===0?k?He(k):k=Be(()=>v(u)):k!==null&&ta(k,()=>{k=null})),g&&ce(!0),l()}),G&&(u=te)}function Ca(t,e,l,a,r,v,u,b){var V,j,F,Y;var M=(r&ua)!==0,K=(r&(xe|_e))!==0,k=t.length,D=e.items,E=e.first,i=E,s,g=null,B,S=[],p=[],y,C,d,n;if(M)for(n=0;n<k;n+=1)y=t[n],C=u(y,n),d=D.get(C),d!==void 0&&((V=d.a)==null||V.measure(),(B??(B=new Set)).add(d));for(n=0;n<k;n+=1){if(y=t[n],C=u(y,n),d=D.get(C),d===void 0){var _=i?i.e.nodes_start:l;g=Ve(_,e,g,g===null?e.first:g.next,y,C,n,a,r),D.set(C,g),S=[],p=[],i=g.next;continue}if(K&&Ia(d,y,n,r),d.e.f&ve&&(He(d.e),M&&((j=d.a)==null||j.unfix(),(B??(B=new Set)).delete(d))),d!==i){if(s!==void 0&&s.has(d)){if(S.length<p.length){var z=p[0],o;g=z.prev;var f=S[0],T=S[S.length-1];for(o=0;o<S.length;o+=1)ze(S[o],z,l);for(o=0;o<p.length;o+=1)s.delete(p[o]);X(e,f.prev,T.next),X(e,g,f),X(e,T,z),i=z,g=T,n-=1,S=[],p=[]}else s.delete(d),ze(d,i,l),X(e,d.prev,d.next),X(e,d,g===null?e.first:g.next),X(e,g,d),g=d;continue}for(S=[],p=[];i!==null&&i.k!==C;)(v||!(i.e.f&ve))&&(s??(s=new Set)).add(i),p.push(i),i=i.next;if(i===null)continue;d=i}S.push(d),g=d,i=d.next}if(i!==null||s!==void 0){for(var h=s===void 0?[]:Ne(s);i!==null;)(v||!(i.e.f&ve))&&h.push(i),i=i.next;var A=h.length;if(A>0){var N=r&Ue&&k===0?l:null;if(M){for(n=0;n<A;n+=1)(F=h[n].a)==null||F.measure();for(n=0;n<A;n+=1)(Y=h[n].a)==null||Y.fix()}Ea(e,h,N,D)}}M&&ca(()=>{var ee;if(B!==void 0)for(d of B)(ee=d.a)==null||ee.apply()}),Pe.first=e.first&&e.first.e,Pe.last=g&&g.e}function Ia(t,e,l,a){a&xe&&De(t.v,e),a&_e?De(t.i,l):t.i=l}function Ve(t,e,l,a,r,v,u,b,M,K){var k=(M&xe)!==0,D=(M&va)===0,E=k?D?oa(r):Ee(r):r,i=M&_e?Ee(u):u,s={i,v:E,k:v,a:null,e:null,prev:l,next:a};try{return s.e=Be(()=>b(t,E,i),G),s.e.prev=l&&l.e,s.e.next=a&&a.e,l===null?e.first=s:(l.next=s,l.e.next=s.e),a!==null&&(a.prev=s,a.e.prev=s.e),s}finally{}}function ze(t,e,l){for(var a=t.next?t.next.e.nodes_start:l,r=e?e.e.nodes_start:l,v=t.e.nodes_start;v!==a;){var u=da(v);r.before(v),v=u}}function X(t,e,l){e===null?t.first=l:(e.next=l,e.e.next=l&&l.e),l!==null&&(l.prev=e,l.e.prev=e&&e.e)}function Ka(t,e,l=e){var a=fa();xa(t,"input",r=>{var v=r?t.defaultValue:t.value;if(v=fe(t)?ge(v):v,l(v),a&&v!==(v=e())){var u=t.selectionStart,b=t.selectionEnd;t.value=v??"",b!==null&&(t.selectionStart=u,t.selectionEnd=Math.min(b,t.value.length))}}),(G&&t.defaultValue!==t.value||ga(e)==null&&t.value)&&l(fe(t)?ge(t.value):t.value),ma(()=>{var r=e();fe(t)&&r===ge(t.value)||t.type==="date"&&!r&&!t.value||r!==t.value&&(t.value=r??"")})}function fe(t){var e=t.type;return e==="number"||e==="range"}function ge(t){return t===""?null:+t}var za=P("Ezzel viszont felhasználsz egy Extra ölést és úgy már <!>",1),Aa=P('<div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200 h-max absolute top-[50%] -translate-y-[50%] text-center m-3">Biztos meg akarod ölni? <br> <!> <div class="*:rounded *:border-2 *:p-1 *:m-1"><button class="bg-red-500 text-black">IGEN</button> <button class="bg-green-500 text-black"> </button></div></div>'),Na=P('<div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200 h-max absolute top-[50%] -translate-y-[50%] text-center m-3">Nem tudsz ölni még kell egy kicsit várnod <br> </div>');function Ha(t,e){var u;he(e,!0);const l=ye(),a=()=>O(e.playerToKill,"$playerToKill",l),r=()=>O(le,"$gameState",l),v=()=>O(ke,"$unixTime",l);((u=a())==null?void 0:u.revealDeath)!=null&&e.open.set(!1),Da(t,{get open(){return e.open},onClose:()=>{e.playerToKill.set(void 0)},children:(b,M)=>{var K=Q(),k=q(K);{var D=i=>{var s=Aa(),g=w(x(s),2),B=w(g);{var S=n=>{var _=za(),z=w(q(_));{var o=T=>{var h=oe("nem fog maradni");c(T,h)},f=T=>{var h=oe();L(()=>{var A;return R(h,`csak ${((A=r().player)==null?void 0:A.extraKills)-1} fog maradni`)}),c(T,h)};H(z,T=>{var h;((h=r().player)==null?void 0:h.extraKills)==1?T(o):T(f,!1)})}c(n,_)};H(B,n=>{var _;((_=r().player)==null?void 0:_.extraKills)>0&&r().gamedata.lastKill+r().gamedata.killCoolDown>v()&&n(S)})}var p=w(B,2),y=x(p);y.__click=n=>{a()&&a().revealDeath==null&&(ka(a(),n),e.open.set(!1),e.playerToKill.set(void 0))};var C=w(y,2);C.__click=()=>{e.open.set(!1),e.playerToKill.set(void 0)};var d=x(C);m(C),m(p),m(s),L(()=>{var n,_;R(g,` Szerintem ${((n=a())==null?void 0:n.name)??""} nagyon szomorú
      lenne `),R(d,`Nem, mert egy jó ember vagyok és meg akarom kímélni ${((_=a())==null?void 0:_.name)??""}
          életét`)}),c(i,s)},E=i=>{var s=Q(),g=q(s);{var B=p=>{var y=Na(),C=w(x(y),2);L(()=>R(C,` ${$(r().gamedata.lastKill+r().gamedata.killCoolDown-v()).altSmallString??""}`)),m(y),c(p,y)},S=p=>{var y=oe("Error");c(p,y)};H(g,p=>{r()&&r().player&&r().player.isKiller&&r().gamedata.lastKill+r().gamedata.killCoolDown>v()&&r().player.extraKills<=0?p(B):p(S,!1)},!0)}c(i,s)};H(k,i=>{r()&&r().player&&r().player.isKiller&&(r().gamedata.lastKill+r().gamedata.killCoolDown<v()||r().player.extraKills>0)?i(D):i(E,!1)})}c(b,K)},$$slots:{default:!0}}),be()}pe(["click"]);var Ba=P('<button aria-label="kill" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-red-500 rounded-full border-2 border-red-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>'),Ua=(t,e)=>{wa(e.thisPlayer,t)},La=P('<button aria-label="vote" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 12 2 2 4-4"></path><path d="M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"></path><path d="M22 19H2"></path></svg></button>'),Ra=P('<div class="text-red-500"> </div>'),Va=Ae(' <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-megaphone -rotate-12"><path d="m3 11 18-5v12L3 14v-3z"></path><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6"></path></svg>',1),qa=Ae('<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-megaphone-off -rotate-12"><path d="M9.26 9.26 3 11v3l14.14 3.14"></path><path d="M21 15.34V6l-7.31 2.03"></path><path d="M11.6 16.8a3 3 0 1 1-5.8-1.6"></path><line x1="2" x2="22" y1="2" y2="22"></line></svg>'),Oa=P('<div class="flex justify-center"><span class="mr-2"> </span> <!> <!></div> <div class="text-gray-700 text-center w-full flex justify-center text-base"><!></div>',1),Fa=P('<div class="line-through"> </div>'),ja=P("<div><!></div>");function Ga(t,e){he(e,!0);const l=ye(),a=()=>O(le,"$gameState",l),r=()=>O(e.killUser,"$killUser",l),v=()=>O(Ta,"$votedForId",l),u=()=>O(ke,"$unixTime",l);var b=ja(),M=x(b);{var K=D=>{var E=Oa(),i=q(E),s=x(i),g=x(s,!0);L(()=>R(g,ue(e.thisPlayer.name,e.thisPlayer.nickname))),m(s);var B=w(s,2);{var S=o=>{var f=Ba();f.__click=T=>{r()==null&&(e.killUser.set(e.thisPlayer),e.killPopUp.set(!0))},c(o,f)},p=o=>{var f=Q(),T=q(f);{var h=A=>{var N=La();N.__click=[Ua,e];var V=x(N);m(N),L(()=>ba(V,`lucide lucide-vote text-${(e.thisPlayer.publicID==v()?"green-800":"green-300")??""}`)),c(A,N)};H(T,A=>{a()&&a().player&&ne(a().gamedata)&&a().player.revealDeath==null&&A(h)},!0)}c(o,f)};H(B,o=>{a().player&&a().player.isKiller&&!ne(a().gamedata)&&e.thisPlayer.revealDeath==null?o(S):o(p,!1)})}var y=w(B,2);{var C=o=>{var f=Ra(),T=x(f,!0);L(()=>R(T,$(e.thisPlayer.revealDeath-u()).altSmallString)),m(f),c(o,f)};H(y,o=>{var f;e.thisPlayer.revealDeath&&((f=a().player)!=null&&f.isKiller)&&o(C)})}m(i);var d=w(i,2),n=x(d);{var _=o=>{var f=Q(),T=q(f);Re(T,1,()=>a().players,Le,(h,A)=>{var N=Q(),V=q(N);{var j=F=>{var Y=oe();L(()=>R(Y,ue(Z(A).name,Z(A).nickname))),c(F,Y)};H(V,F=>{Z(A).voteID==e.thisPlayer.publicID&&Z(A).voteID!=null&&F(j)})}c(h,N)}),c(o,f)},z=o=>{var f=Q(),T=q(f);{var h=N=>{var V=Va(),j=q(V,!0);re(),L(()=>R(j,e.thisPlayer.canCallMeeting)),c(N,V)},A=N=>{var V=qa();c(N,V)};H(T,N=>{e.thisPlayer.canCallMeeting>0?N(h):N(A,!1)})}c(o,f)};H(n,o=>{ne(a().gamedata)?o(_):o(z,!1)})}m(d),c(D,E)},k=D=>{var E=Fa(),i=x(E,!0);L(()=>R(i,ue(e.thisPlayer.name,e.thisPlayer.nickname))),m(E),c(D,E)};H(M,D=>{e.thisPlayer.alive?D(K):D(k,!1)})}m(b),L(()=>me(b,`w-full m-2 rounded-full border-2 max-w-[700px] p-0.5 text-center bg-${(e.thisPlayer.alive?"green-500":"red-500")??""}`)),c(t,b),be()}pe(["click"]);var Xa=P('<div class="min-h-full aspect-4/5 rounded-xl bg-gray-400 flex flex-col mx-1"><div class="flex-1 bg-gray-600 rounded-2xl mx-3 mt-2 flex place-content-center items-center text-5xl *:bg-gray-900 *:m-1 *:p-1 *:py-3 *:rounded"><div> </div> <div> </div></div> <div class=" text-center p-1"> </div></div>');function se(t,e){var l=Xa(),a=x(l),r=x(a),v=x(r,!0);L(()=>R(v,Math.abs(Math.floor(e.number%100/10)))),m(r);var u=w(r,2),b=x(u,!0);L(()=>R(b,Math.abs(e.number%10))),m(u),m(a);var M=w(a,2),K=x(M,!0);m(M),m(l),L(()=>R(K,e.text)),c(t,l)}var Ya=P('<div class="flex place-content-evenly items-center flex-wrap *:my-2"><form class="text-gray-700 flex place-content-center h-10"><input type="text" placeholder="írd ide a kódot" class="rounded-xl w-60"> <button type="submit" class="bg-gray-200 ml-4 p-1 rounded-md">Belépés</button></form> <div class="h-full border-gray-800 border-2 rounded-lg bg-gray-700 py-3 px-6 text-lg text-white">Hátralévő idő: <br> </div></div>'),Ja=P('<div title="Te vagy a gyilkos!">Gyilkos</div>'),Qa=P('<div title="Ártatlan vagy">Ártatlan</div>'),Za=t=>{Ma()},Wa=P('<div class="flex-1 text-white flex place-content-evenly"><!> <!></div>'),$a=P('<div class="flex-1 text-white flex place-content-evenly relative"><!> <!> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter text-center">Nincs Meeting</div></div>'),et=P('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-xl lg:text-3xl tracking-tighter z-10 text-white">Nem tudsz meetinget hívni</div>',1),at=P('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter z-10 text-white">Meeting van</div>',1),tt=P('<button class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</button>'),rt=P('<div class="w-full flex justify-between text-white items-center mt-2"><div class="bg-gray-700 py-3 px-6 border-gray-800 border-2 rounded-lg relative"><div> </div> <div><!></div> <button class="p-2 border border-gray-800 bg-gray-800 rounded-full aspect-square h-max absolute -right-4 top-3" aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button></div> <div class="h-full border-gray-800 border-2 rounded-lg bg-gray-700 py-3 px-6 text-lg">Hátralévő idő: <br> </div></div> <br> <div class="w-full flex place-content-center h-40 bg-gray-700 rounded-xl border-gray-950 p-4 *:mx-1 lg:py-6 lg:px-4 lg:h-52"><!> <div class="flex-1 flex place-content-center items-center relative text-center"><!></div></div>',1),lt=P('<div class="flex flex-col items-center text-lg text-center"></div>'),nt=P('<div class="max-w-screen p-3 lg:px-96 lg:py-10"><!> <!> <hr class="my-3 mx-10"> <!></div> <!>',1);function gt(t,e){he(e,!0);const l=ye(),a=()=>O(le,"$gameState",l),r=()=>O(ke,"$unixTime",l),v=()=>O(E,"$deadStrikeThrough",l),u=()=>O(D,"$color",l);let b=_a("");function M(){Ce(b,"")}let K=Ke(!1),k=Ke(),D=Ie(le,n=>{var _;return(_=n.player)!=null&&_.isKiller?"red-500":"green-500"}),E=Ie(le,n=>{var _;return((_=n.player)==null?void 0:_.revealDeath)==null?"":"line-through"});var i=nt(),s=q(i),g=x(s);{var B=n=>{var _=Ya(),z=x(_),o=x(z);pa(o),ya(o,"maxlength",16),re(2),m(z);var f=w(z,2),T=w(x(f),2,!0);L(()=>R(T,$(a().gamedata.gameStart+a().gamedata.gameLength-r()).smallString)),m(f),m(_),ha("submit",z,async h=>{await Sa(Z(b),h)||M()}),Ka(o,()=>Z(b),h=>Ce(b,h)),c(n,_)};H(g,n=>{a().player||n(B)})}var S=w(g,2);{var p=n=>{var _=rt(),z=q(_),o=x(z),f=x(o),T=x(f,!0);m(f);var h=w(f,2),A=x(h);{var N=I=>{var U=Ja();c(I,U)},V=I=>{var U=Qa();c(I,U)};H(A,I=>{a().player.isKiller?I(N):I(V,!1)})}m(h);var j=w(h,2);j.__click=[Za],m(o);var F=w(o,2),Y=w(x(F),2,!0);L(()=>R(Y,$(a().gamedata.gameStart+a().gamedata.gameLength-r()).smallString)),m(F),m(z);var ee=w(z,4),we=x(ee);{var qe=I=>{var U=Wa(),J=x(U);se(J,{get number(){return $(a().gamedata.meetingStart+a().gamedata.meetingLength-r()).mins},text:"Perc"});var ae=w(J,2);se(ae,{get number(){return $(a().gamedata.meetingStart+a().gamedata.meetingLength-r()).secs},text:"Másodperc"}),m(U),c(I,U)},Oe=I=>{var U=$a(),J=x(U);se(J,{number:0,text:"Perc"});var ae=w(J,2);se(ae,{number:0,text:"Másodperc"}),re(2),m(U),c(I,U)};H(we,I=>{ne(a().gamedata)?I(qe):I(Oe,!1)})}var Te=w(we,2),Fe=x(Te);{var je=I=>{var U=et();re(2),c(I,U)},Ge=I=>{var U=Q(),J=q(U);{var ae=W=>{var ie=at();re(2),c(W,ie)},Xe=W=>{var ie=tt();ie.__click=function(...Ye){var Me;(Me=Pa)==null||Me.apply(this,Ye)},c(W,ie)};H(J,W=>{ne(a().gamedata)?W(ae):W(Xe,!1)},!0)}c(I,U)};H(Fe,I=>{a().player.canCallMeeting<=0||a().player.revealDeath!=null?I(je):I(Ge,!1)})}m(Te),m(ee),L(()=>{me(f,`${v()??""} text-4xl tracking-wider`),R(T,a().player.name),me(h,`text-lg tracking-normal text-${u()??""} ${v()??""} pl-14 -mt-1`)}),c(n,_)};H(S,n=>{a().player&&n(p)})}var y=w(S,4);{var C=n=>{var _=lt();Re(_,5,()=>a().players,Le,(z,o)=>{Ga(z,{killUser:k,killPopUp:K,get thisPlayer(){return Z(o)}})}),m(_),c(n,_)};H(y,n=>{a().players&&n(C)})}m(s);var d=w(s,2);return Ha(d,{open:K,playerToKill:k}),c(t,i),be({resetIdTextInput:M})}pe(["click"]);export{gt as component};
