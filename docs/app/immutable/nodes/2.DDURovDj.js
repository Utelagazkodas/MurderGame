import{a as y,t as w,d as we}from"../chunks/Dqa6U9ED.js";import{q as B,O as ee,ae as qe,ao as Le,J as Fe,I as Oe,H as Ge,am as Te,M as Xe,N as me,P as te,V as F,ai as Ye,as as J,Q as Me,R as Pe,T as Je,F as _e,at as Qe,au as Ze,al as je,av as We,ap as $e,aa as et,X as tt,B as xe,aw as at,ax as rt,ay as lt,ag as nt,az as it,b as st,aA as ot,p as ie,t as z,i as se,s as M,j as _,k as g,y as Q,D as he,aB as X,aC as vt,g as ae}from"../chunks/BHoosnMm.js";import{l as dt,d as oe,s as A,e as ct}from"../chunks/DDl2wLf5.js";import{s as ve,a as H,i as N}from"../chunks/ioujdd6N.js";import{s as ne,a as ut,r as ft,b as gt}from"../chunks/3PrYyqCu.js";import{k as mt,f as be,i as W,g as Z,a as j,u as Se,v as _t,b as xt,l as ht,c as bt,d as yt}from"../chunks/Dpc5gPYq.js";import{d as ye,w as pe}from"../chunks/S5aFjjoE.js";import{P as pt}from"../chunks/5lVjussg.js";function kt(t,e){return e}function wt(t,e,r,a){for(var s=[],o=e.length,i=0;i<o;i++)Ze(e[i].e,s,!0);var u=o>0&&s.length===0&&r!==null;if(u){var x=r.parentNode;je(x),x.append(r),a.clear(),R(t,e[0].prev,e[o-1].next)}We(s,()=>{for(var m=0;m<o;m++){var p=e[m];u||(a.delete(p.k),R(t,p.prev,p.next)),$e(p.e,!u)}})}function Tt(t,e,r,a,s,o=null){var i=t,u={flags:e,items:new Map,first:null};{var x=t;i=B?ee(qe(x)):x.appendChild(Le())}B&&Fe();var m=null,p=!1;Oe(()=>{var l=r(),v=Ge(l)?l:l==null?[]:Te(l),n=v.length;if(p&&n===0)return;p=n===0;let d=!1;if(B){var E=i.data===Xe;E!==(n===0)&&(i=me(),ee(i),te(!1),d=!0)}if(B){for(var K=null,C,f=0;f<n;f++){if(F.nodeType===8&&F.data===Ye){i=F,d=!0,te(!1);break}var D=v[f],P=a(D,f);C=Ee(F,u,K,null,D,P,f,s,e),u.items.set(P,C),K=C}n>0&&ee(me())}if(!B){var b=et;Mt(v,u,i,s,e,(b.f&J)!==0,a)}o!==null&&(n===0?m?Me(m):m=Pe(()=>o(i)):m!==null&&Je(m,()=>{m=null})),d&&te(!0),r()}),B&&(i=F)}function Mt(t,e,r,a,s,o,i,u){var x=t.length,m=e.items,p=e.first,l=p,v,n=null,d=[],E=[],K,C,f,D;for(D=0;D<x;D+=1){if(K=t[D],C=i(K,D),f=m.get(C),f===void 0){var P=l?l.e.nodes_start:r;n=Ee(P,e,n,n===null?e.first:n.next,K,C,D,a,s),m.set(C,n),d=[],E=[],l=n.next;continue}if(Pt(f,K,D),f.e.f&J&&Me(f.e),f!==l){if(v!==void 0&&v.has(f)){if(d.length<E.length){var b=E[0],c;n=b.prev;var h=d[0],S=d[d.length-1];for(c=0;c<d.length;c+=1)ke(d[c],b,r);for(c=0;c<E.length;c+=1)v.delete(E[c]);R(e,h.prev,S.next),R(e,n,h),R(e,S,b),l=b,n=S,D-=1,d=[],E=[]}else v.delete(f),ke(f,l,r),R(e,f.prev,f.next),R(e,f,n===null?e.first:n.next),R(e,n,f),n=f;continue}for(d=[],E=[];l!==null&&l.k!==C;)(o||!(l.e.f&J))&&(v??(v=new Set)).add(l),E.push(l),l=l.next;if(l===null)continue;f=l}d.push(f),n=f,l=f.next}if(l!==null||v!==void 0){for(var T=v===void 0?[]:Te(v);l!==null;)(o||!(l.e.f&J))&&T.push(l),l=l.next;var U=T.length;if(U>0){var $=x===0?r:null;wt(e,T,$,m)}}_e.first=e.first&&e.first.e,_e.last=n&&n.e}function Pt(t,e,r,a){Qe(t.v,e),t.i=r}function Ee(t,e,r,a,s,o,i,u,x,m){var p=(x&rt)!==0,l=(x&lt)===0,v=p?l?tt(s):xe(s):s,n=x&at?xe(i):i,d={i:n,v,k:o,a:null,e:null,prev:r,next:a};try{return d.e=Pe(()=>u(t,v,n),B),d.e.prev=r&&r.e,d.e.next=a&&a.e,r===null?e.first=d:(r.next=d,r.e.next=d.e),a!==null&&(a.prev=d,a.e.prev=d.e),d}finally{}}function ke(t,e,r){for(var a=t.next?t.next.e.nodes_start:r,s=e?e.e.nodes_start:r,o=t.e.nodes_start;o!==a;){var i=nt(o);s.before(o),o=i}}function R(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function St(t,e,r=e){var a=it();dt(t,"input",s=>{var o=s?t.defaultValue:t.value;if(o=re(t)?le(o):o,r(o),a&&o!==(o=e())){var i=t.selectionStart,u=t.selectionEnd;t.value=o??"",u!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(u,t.value.length))}}),(B&&t.defaultValue!==t.value||st(e)==null&&t.value)&&r(re(t)?le(t.value):t.value),ot(()=>{var s=e();re(t)&&s===le(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function re(t){var e=t.type;return e==="number"||e==="range"}function le(t){return t===""?null:+t}var Et=w('<div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200 h-32 absolute top-[50%] -translate-y-[50%]">Biztos meg akarod ölni? <br> <div class="*:rounded *:border-2 *:p-1"><button class="bg-red-500 text-black">IGEN</button> <button class="bg-green-500 text-black"> </button></div></div>');function It(t,e){ie(e,!0);const r=ve(),a=()=>H(e.playerToKill,"$playerToKill",r);pt(t,{get open(){return e.open},children:(s,o)=>{var i=Et(),u=M(_(i),2),x=M(u),m=_(x);m.__click=v=>{a()&&a().revealDeath==null&&(mt(a(),v),e.open.set(!1),e.playerToKill.set(void 0))};var p=M(m,2);p.__click=()=>{e.open.set(!1),e.playerToKill.set(void 0)};var l=_(p);g(p),g(x),g(i),z(()=>{var v,n;A(u,` Szerintem ${((v=a())==null?void 0:v.name)??""} nagyon szomorú
        lenne `),A(l,`Nem, mert egy jó ember vagyok és meg akarom kímélni ${((n=a())==null?void 0:n.name)??""}
            életét`)}),y(s,i)},$$slots:{default:!0}}),se()}oe(["click"]);var Dt=w('<button aria-label="kill" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-red-500 rounded-full border-2 border-red-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>'),Ct=(t,e)=>{_t(e.thisPlayer,t)},Kt=w('<button aria-label="vote" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 12 2 2 4-4"></path><path d="M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"></path><path d="M22 19H2"></path></svg></button>'),Nt=w('<div class="text-red-500"> </div>'),zt=w('<div class="flex justify-center"><span class="mr-2"> </span> <!> <!></div>'),At=w('<div class="line-through"> </div>'),Ht=w("<div><!></div>");function Ut(t,e){ie(e,!0);const r=ve(),a=()=>H(Z,"$gameState",r),s=()=>H(e.killUser,"$killUser",r),o=()=>H(xt,"$votedForId",r),i=()=>H(Se,"$unixTime",r);var u=Ht(),x=_(u);{var m=l=>{var v=zt(),n=_(v),d=_(n,!0);z(()=>A(d,be(e.thisPlayer.name,e.thisPlayer.nickname))),g(n);var E=M(n,2);{var K=P=>{var b=Dt();b.__click=c=>{s()==null&&(e.killUser.set(e.thisPlayer),e.killPopUp.set(!0))},y(P,b)},C=P=>{var b=we(),c=Q(b);{var h=S=>{var T=Kt();T.__click=[Ct,e];var U=_(T);g(T),z(()=>ut(U,`lucide lucide-vote text-${(e.thisPlayer.publicID==o()?"green-800":"green-300")??""}`)),y(S,T)};N(c,S=>{a()&&a().player&&W(a().gamedata)&&S(h)},!0)}y(P,b)};N(E,P=>{a().player&&a().player.isKiller&&!W(a().gamedata)&&e.thisPlayer.revealDeath==null?P(K):P(C,!1)})}var f=M(E,2);{var D=P=>{var b=Nt(),c=_(b,!0);z(()=>A(c,j(e.thisPlayer.revealDeath-i()).altSmallString)),g(b),y(P,b)};N(f,P=>{var b;e.thisPlayer.revealDeath&&((b=a().player)!=null&&b.isKiller)&&P(D)})}g(v),y(l,v)},p=l=>{var v=At(),n=_(v,!0);z(()=>A(n,be(e.thisPlayer.name,e.thisPlayer.nickname))),g(v),y(l,v)};N(x,l=>{e.thisPlayer.alive?l(m):l(p,!1)})}g(u),z(()=>ne(u,`w-full m-2 rounded-full border-2 max-w-[700px] p-0.5 text-center bg-${(e.thisPlayer.alive?"green-500":"red-500")??""}`)),y(t,u),se()}oe(["click"]);var Bt=w('<div class="min-h-full aspect-4/5 rounded-xl bg-gray-400 flex flex-col mx-1"><div class="flex-1 bg-gray-600 rounded-2xl mx-3 mt-2 flex place-content-center items-center text-5xl *:bg-gray-900 *:m-1 *:p-1 *:py-3 *:rounded"><div> </div> <div> </div></div> <div class=" text-center p-1"> </div></div>');function Y(t,e){var r=Bt(),a=_(r),s=_(a),o=_(s,!0);z(()=>A(o,Math.abs(Math.floor(e.number%100/10)))),g(s);var i=M(s,2),u=_(i,!0);z(()=>A(u,Math.abs(e.number%10))),g(i),g(a);var x=M(a,2),m=_(x,!0);g(x),g(r),z(()=>A(m,e.text)),y(t,r)}var Rt=w('<form class="text-gray-700 flex place-content-center"><input type="text" placeholder="írd ide a kódot" class="rounded-xl"> <button type="submit" class="bg-gray-200 ml-4 p-1 rounded-md">Belépés</button></form>'),Vt=w('<div title="Te vagy a gyilkos!">Gyilkos</div>'),qt=w('<div title="Ártatlan vagy">Ártatlan</div>'),Lt=t=>{ht()},Ft=w('<div class="flex-1 text-white flex place-content-evenly"><!> <!></div>'),Ot=w('<div class="flex-1 text-white flex place-content-evenly relative"><!> <!> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter text-center">Nincs Meeting</div></div>'),Gt=w('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900 ">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-xl lg:text-3xl  tracking-tighter z-10 text-white">Nem tudsz meetinget hívni</div>',1),Xt=w('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter z-10 text-white">Meeting van</div>',1),Yt=w('<button class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</button>'),Jt=w('<div class="w-full flex justify-between text-white items-center mt-2"><div class="bg-gray-700 py-3 px-6 border-gray-800 border-2 rounded-lg relative"><div> </div> <div><!></div> <button class="p-2 border border-gray-800 bg-gray-800 rounded-full aspect-square h-max absolute -right-4 top-3" aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button></div> <div class="h-full border-gray-800 border-2 rounded-lg bg-gray-700 py-3 px-6 text-lg">Hátralévő idő: <br> </div></div> <br> <div class="w-full flex place-content-center h-40 bg-gray-700 rounded-xl border-gray-950 p-4 *:mx-1 lg:py-6 lg:px-4 lg:h-52"><!> <div class="flex-1 flex place-content-center items-center relative text-center"><!></div></div>',1),Qt=w('<div class="flex flex-col items-center text-lg text-center"></div>'),Zt=w('<div class="max-w-screen p-3 lg:px-96 lg:py-10"><!> <!> <hr class="my-3 mx-10"> <!></div> <!>',1);function na(t,e){ie(e,!0);const r=ve(),a=()=>H(Z,"$gameState",r),s=()=>H(v,"$deadStrikeThrough",r),o=()=>H(l,"$color",r),i=()=>H(Se,"$unixTime",r);let u=vt("");function x(){he(u,"")}let m=pe(!1),p=pe(),l=ye(Z,c=>{var h;return(h=c.player)!=null&&h.isKiller?"red-500":"green-500"}),v=ye(Z,c=>{var h;return((h=c.player)==null?void 0:h.revealDeath)==null?"":"line-through"});var n=Zt(),d=Q(n),E=_(d);{var K=c=>{var h=Rt(),S=_(h);ft(S),gt(S,"maxlength",16),X(2),g(h),ct("submit",h,async T=>{await bt(ae(u),T)}),St(S,()=>ae(u),T=>he(u,T)),y(c,h)};N(E,c=>{a().player||c(K)})}var C=M(E,2);{var f=c=>{var h=Jt(),S=Q(h),T=_(S),U=_(T),$=_(U,!0);g(U);var O=M(U,2),Ie=_(O);{var De=k=>{var I=Vt();y(k,I)},Ce=k=>{var I=qt();y(k,I)};N(Ie,k=>{a().player.isKiller?k(De):k(Ce,!1)})}g(O);var Ke=M(O,2);Ke.__click=[Lt],g(T);var de=M(T,2),Ne=M(_(de),2,!0);z(()=>A(Ne,j(a().gamedata.gameStart+a().gamedata.gameLength-i()).smallString)),g(de),g(S);var ce=M(S,4),ue=_(ce);{var ze=k=>{var I=Ft(),V=_(I);Y(V,{get number(){return j(a().gamedata.meetingStart+a().gamedata.meetingLength-i()).mins},text:"Perc"});var L=M(V,2);Y(L,{get number(){return j(a().gamedata.meetingStart+a().gamedata.meetingLength-i()).secs},text:"Másodperc"}),g(I),y(k,I)},Ae=k=>{var I=Ot(),V=_(I);Y(V,{number:0,text:"Perc"});var L=M(V,2);Y(L,{number:0,text:"Másodperc"}),X(2),g(I),y(k,I)};N(ue,k=>{W(a().gamedata)?k(ze):k(Ae,!1)})}var fe=M(ue,2),He=_(fe);{var Ue=k=>{var I=Gt();X(2),y(k,I)},Be=k=>{var I=we(),V=Q(I);{var L=q=>{var G=Xt();X(2),y(q,G)},Re=q=>{var G=Yt();G.__click=function(...Ve){var ge;(ge=yt)==null||ge.apply(this,Ve)},y(q,G)};N(V,q=>{W(a().gamedata)?q(L):q(Re,!1)},!0)}y(k,I)};N(He,k=>{a().player.canCallMeeting<=0||a().player.revealDeath!=null?k(Ue):k(Be,!1)})}g(fe),g(ce),z(()=>{ne(U,`${s()??""} text-4xl tracking-wider`),A($,a().player.name),ne(O,`text-lg tracking-normal text-${o()??""} ${s()??""} pl-14 -mt-1`)}),y(c,h)};N(C,c=>{a().player&&c(f)})}var D=M(C,4);{var P=c=>{var h=Qt();Tt(h,5,()=>a().players,kt,(S,T)=>{Ut(S,{killUser:p,killPopUp:m,get thisPlayer(){return ae(T)}})}),g(h),y(c,h)};N(D,c=>{a().players&&c(P)})}g(d);var b=M(d,2);return It(b,{open:m,playerToKill:p}),y(t,n),se({resetIdTextInput:x})}oe(["click"]);export{na as component};
