import{a as w,t as T,c as de}from"../chunks/disclose-version.IHbDwctz.js";import{h as R,B as ve,K as Ye,J as Ge,z as Je,b as Xe,y as qe,aa as Ue,H as Ke,A as Ee,C as fe,f as re,a6 as We,ac as le,D as ze,d as Re,F as Qe,v as De,ad as Ze,ae as er,a9 as rr,af as tr,e as ar,$ as nr,I as sr,k as Ne,ag as ir,ah as lr,ai as or,a4 as cr,aj as dr,x as vr,ak as fr,al as ur,am as _r,a as be,an as pr,p as gr,i as hr,q as H,t as _,ao as ue,W as k,X as h,Y as O,g as X,V as q,ap as mr}from"../chunks/runtime.BGk-bNsm.js";import{a as br,l as xr,d as kr,e as yr,s as Y}from"../chunks/render.BO1-W9wQ.js";import{s as wr,i as M,p as je,a as Ir,b as _e}from"../chunks/store.d4wZdYhp.js";import{o as Ar}from"../chunks/index-client.DNMqDCSZ.js";import{w as ye}from"../chunks/index.D5Nr9HeD.js";function Oe(e,r){return r}function Cr(e,r,t,n){for(var a=[],s=r.length,i=0;i<s;i++)er(r[i].e,a,!0);var x=s>0&&a.length===0&&t!==null;if(x){var u=t.parentNode;rr(u),u.append(t),n.clear(),F(e,r[0].prev,r[s-1].next)}tr(a,()=>{for(var m=0;m<s;m++){var I=r[m];x||(n.delete(I.k),F(e,I.prev,I.next)),ar(I.e,!x)}})}function Te(e,r,t,n,a,s=null){var i=e,x={flags:r,items:new Map,first:null};{var u=e;i=R?ve(Ye(u)):u.appendChild(Ge())}R&&Je();var m=null,I=!1;Xe(()=>{var l=t(),b=qe(l)?l:l==null?[]:Ue(l),d=b.length;if(I&&d===0)return;I=d===0;let v=!1;if(R){var E=i.data===Ke;E!==(d===0)&&(i=Ee(),ve(i),fe(!1),v=!0)}if(R){for(var U=null,S,f=0;f<d;f++){if(re.nodeType===8&&re.data===We){i=re,v=!0,fe(!1);break}var D=b[f],G=n(D,f);S=Be(re,x,U,null,D,G,f,a,r),x.items.set(G,S),U=S}d>0&&ve(Ee())}if(!R){var o=nr;Er(b,x,i,a,r,(o.f&le)!==0,n)}s!==null&&(d===0?m?ze(m):m=Re(()=>s(i)):m!==null&&Qe(m,()=>{m=null})),v&&fe(!0),t()}),R&&(i=re)}function Er(e,r,t,n,a,s,i,x){var u=e.length,m=r.items,I=r.first,l=I,b,d=null,v=[],E=[],U,S,f,D;for(D=0;D<u;D+=1){if(U=e[D],S=i(U,D),f=m.get(S),f===void 0){var G=l?l.e.nodes_start:t;d=Be(G,r,d,d===null?r.first:d.next,U,S,D,n,a),m.set(S,d),v=[],E=[],l=d.next;continue}if(Dr(f,U,D),f.e.f&le&&ze(f.e),f!==l){if(b!==void 0&&b.has(f)){if(v.length<E.length){var o=E[0],c;d=o.prev;var g=v[0],N=v[v.length-1];for(c=0;c<v.length;c+=1)$e(v[c],o,t);for(c=0;c<E.length;c+=1)b.delete(E[c]);F(r,g.prev,N.next),F(r,d,g),F(r,N,o),l=o,d=N,D-=1,v=[],E=[]}else b.delete(f),$e(f,l,t),F(r,f.prev,f.next),F(r,f,d===null?r.first:d.next),F(r,d,f),d=f;continue}for(v=[],E=[];l!==null&&l.k!==S;)(s||!(l.e.f&le))&&(b??(b=new Set)).add(l),E.push(l),l=l.next;if(l===null)continue;f=l}v.push(f),d=f,l=f.next}if(l!==null||b!==void 0){for(var y=b===void 0?[]:Ue(b);l!==null;)(s||!(l.e.f&le))&&y.push(l),l=l.next;var A=y.length;if(A>0){var K=u===0?t:null;Cr(r,y,K,m)}}De.first=r.first&&r.first.e,De.last=d&&d.e}function Dr(e,r,t,n){Ze(e.v,r),e.i=t}function Be(e,r,t,n,a,s,i,x,u,m){var I=(u&lr)!==0,l=(u&or)===0,b=I?l?sr(a):Ne(a):a,d=u&ir?Ne(i):i,v={i:d,v:b,k:s,a:null,e:null,prev:t,next:n};try{return v.e=Re(()=>x(e,b,d),R),v.e.prev=t&&t.e,v.e.next=n&&n.e,t===null?r.first=v:(t.next=v,t.e.next=v.e),n!==null&&(n.prev=v,n.e.prev=v.e),v}finally{}}function $e(e,r,t){for(var n=e.next?e.next.e.nodes_start:t,a=r?r.e.nodes_start:t,s=e.e.nodes_start;s!==n;){var i=cr(s);a.before(s),s=i}}function F(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Nr(e){if(R){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var n=e.value;xe(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var a=e.checked;xe(e,"checked",null),e.checked=a}}};e.__on_r=t,dr(t),br()}}function xe(e,r,t,n){var a=e.__attributes??(e.__attributes={});R&&(a[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||a[r]!==(a[r]=t)&&(r==="style"&&"__styles"in e&&(e.__styles={}),r==="loading"&&(e[fr]=t),t==null?e.removeAttribute(r):typeof t!="string"&&jr(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var Se=new Map;function jr(e){var r=Se.get(e.nodeName);if(r)return r;Se.set(e.nodeName,r=[]);for(var t,n=e,a=Element.prototype;a!==n;){t=ur(n);for(var s in t)t[s].set&&r.push(s);n=vr(n)}return r}function Or(e,r,t=r){var n=_r();xr(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=pe(e)?ge(s):s,t(s),n&&s!==(s=r())){var i=e.selectionStart,x=e.selectionEnd;e.value=s??"",x!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(x,e.value.length))}}),(R&&e.defaultValue!==e.value||be(r)==null&&e.value)&&t(pe(e)?ge(e.value):e.value),pr(()=>{var a=r();pe(e)&&a===ge(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function pe(e){var r=e.type;return r==="number"||r==="range"}function ge(e){return e===""?null:+e}let ie=ye(void 0),he=ye(!1),me=ye(void 0),te="http://0.0.0.0:3000/";async function Tr(){let e=await fetch("./ip");e.ok&&(te=await e.text())}/*! typescript-cookie v1.0.6 | MIT */const Me=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Le=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),we=decodeURIComponent,Ie=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function $r(e){return e=Object.assign({},e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires!=null&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([r,t])=>t!=null&&t!==!1).map(([r,t])=>t===!0?`; ${r}`:`; ${r}=${t.split(";")[0]}`).join("")}function He(e,r,t){const n=/(?:^|; )([^=]*)=([^;]*)/g,a={};let s;for(;(s=n.exec(document.cookie))!=null;)try{const i=t(s[1]);if(a[i]=r(s[2],i),e===i)break}catch{}return e!=null?a[e]:a}const Ve=Object.freeze({decodeName:we,decodeValue:Ie,encodeName:Me,encodeValue:Le}),Ae=Object.freeze({path:"/"});function Ce(e,r,t=Ae,{encodeValue:n=Le,encodeName:a=Me}={}){return document.cookie=`${a(e)}=${n(r,e)}${$r(t)}`}function Fe(e,{decodeValue:r=Ie,decodeName:t=we}={}){return He(e,r,t)}function Sr({decodeValue:e=Ie,decodeName:r=we}={}){return He(void 0,e,r)}function Pe(e,r=Ae){Ce(e,"",Object.assign({},r,{expires:-1}))}function ke(e,r){const t={set:function(a,s,i){return Ce(a,s,Object.assign({},this.attributes,i),{encodeValue:this.converter.write})},get:function(a){if(arguments.length===0)return Sr(this.converter.read);if(a!=null)return Fe(a,this.converter.read)},remove:function(a,s){Pe(a,Object.assign({},this.attributes,s))},withAttributes:function(a){return ke(this.converter,Object.assign({},this.attributes,a))},withConverter:function(a){return ke(Object.assign({},this.converter,a),this.attributes)}},n={attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}};return Object.create(t,n)}ke({read:Ve.decodeValue,write:Ve.encodeValue},Ae);var Vr=T('<form class="text-gray-700"><input type="text" placeholder="írd ide a kódot" class="rounded-xl"></form>'),Ur=T('viszont <span class="font-bold text-red-700">halott vagy</span> :(',1),zr=T('<span class="text-green-300">Nem te vagy a gyilkos</span> <!>',1),Rr=(e,r,t)=>{_(r)&&(t(e,_(r)),H(r,void 0))},Br=(e,r)=>{H(r,void 0)},Mr=T(`<span class="text-red-400">TE VAGY A GYILKOS</span> screenshotold le
        -> <button class="text-blue-300">kép</button> <br> ezzel tudsz majd ölni, és egy pár órával utána itt öld meg a piros X-el amikor
        bejelenti <dialog class="overflow-hidden top-0 h-screen w-screen bg-gray-900/65 backdrop-blur text-right"><div class="relative h-screen w-auto mx-auto flex justify-center"><img src="/stone.jpeg" class="z-10 h-screen w-auto object-contain p-2 rounded-2xl" alt="stone"> <button aria-label="close" class="absolute top-2 right-2 z-20 p-0.5 rounded"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-gray-200"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button></div></dialog> <dialog class="top-0 bg-transparent"><div class="w-screen top-0 h-screen backdrop-blur bg-gray-900/65 flex items-center justify-center"><div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200">Biztos meg akarod ölni? <br> <div class="*:rounded *:border-2 *:p-1"><button class="bg-red-500">IGEN</button> <button class="bg-green-500"> </button></div></div></div></dialog>`,1),Lr=(e,r,t,n)=>{_(r)==null&&t(e,_(n))},Hr=T('<button aria-label="kill" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-red-500 rounded-full border-2 border-red-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>'),Fr=T('<div class="bg-green-500 flex justify-center"><span class="mr-2"> </span> <!></div>'),Pr=T('<div class="bg-red-500"> </div>'),Yr=T('<div class="flex flex-col items-center text-lg *:w-full *:m-2 text-center *:rounded-full *:border-2 *:p-0.5"></div>'),Gr=T('<div class="w-full flex justify-between text-lg"> <button aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button></div> <br> <!> <!>',1),Jr=T('<div class="bg-green-500 flex justify-center"><span class="mr-2"> </span></div>'),Xr=T('<div class="bg-red-500"> </div>'),qr=T('<div class="flex flex-col items-center text-lg *:w-full *:m-2 text-center *:rounded-full *:border-2 *:p-0.5"></div>'),Kr=T('<div class="w-screen h-screen flex place-content-center items-center bg-gray-800"><div class="max-w-screen max-h-screen bg-gray-700 rounded-2xl p-6 m-5 h-[90vh] aspect-9/16 lg:aspect-12/9 border border-gray-400 text-gray-200"><!> <!></div></div>');function at(e,r){gr(r,!0);const t=wr(),n=()=>_e(ie,"$thisUser",t),a=()=>_e(he,"$killerPopup",t),s=()=>_e(me,"$otherUsers",t);let i=ue(""),x=ue(!1),u=ue(void 0),m;Ar(async()=>{await Tr();let o=Fe("id");l(),o&&(H(i,je(o)),I())});let I=async o=>{if(o&&o.preventDefault(),_(i).length==16){let c=await fetch(te+"id/"+_(i));if(c.ok){let g=await c.text();H(x,!0),ie.set(JSON.parse(g)),Ce("id",_(i)),l(),m=setInterval(l,5e3)}}},l=async o=>{var g;o&&o.preventDefault();let c;if(n()&&n().id!=null?c=await fetch(`${te}players/${n().id}`):c=await fetch(te+"players"),c.ok){let N=await c.text(),y=JSON.parse(N);if(y){for(let A=0;A<y.length;A++)((g=n())==null?void 0:g.publicID)==y[A].publicID&&(Ir(ie,be(n).alive=y[A].alive,be(n)),y.splice(A,1));me.set(y)}}},b=async(o,c)=>{var g;o.preventDefault(),_(u)==null||_(u).publicID!=c.publicID?H(u,je(c)):((await fetch(te+"kill/"+c.publicID,{method:"POST",body:(g=n())==null?void 0:g.id})).ok||console.error(`error killing ${c.name}`),l(o))},d=o=>{o&&o.preventDefault(),ie.set(void 0),me.set(void 0),H(i,""),H(x,!1),Pe("id"),clearInterval(m),l()};var v=Kr(),E=k(v),U=k(E);{var S=o=>{var c=Vr(),g=k(c);Nr(g),xe(g,"maxlength",16),h(c),yr("submit",c,I),Or(g,()=>_(i),N=>H(i,N)),w(o,c)};M(U,o=>{_(x)||o(S)})}var f=O(U,2);{var D=o=>{var c=Gr(),g=X(c),N=k(g),y=O(N);y.__click=d,h(g);var A=O(g,4);{var K=$=>{var V=zr(),j=O(X(V),2);{var p=C=>{var P=Ur();mr(2),w(C,P)};M(j,C=>{n().alive||C(p)})}w($,V)},W=$=>{var V=Mr(),j=O(X(V),2);j.__click=()=>{he.set(!a())};var p=O(j,4),C=k(p),P=O(k(C),2);P.__click=()=>{he.set(!a())},h(C),h(p);var Q=O(p,2),ne=k(Q),B=k(ne),z=O(k(B),2),L=O(z),se=k(L);se.__click=[Rr,u,b];var Z=O(se,2);Z.__click=[Br,u];var ce=k(Z);h(Z),h(L),h(B),h(ne),h(Q),q(()=>{var J,ee;p.open=a(),Q.open=_(u)!=null&&a()==!1,Y(z,` Szerintem ${((J=_(u))==null?void 0:J.name)??""} nagyon szomorú
              lenne `),Y(ce,`Nem, mert egy jó ember vagyok és meg akarom kímélni ${((ee=_(u))==null?void 0:ee.name)??""}
                  életét`)}),w($,V)};M(A,$=>{n().isKiller?$(W,!1):$(K)})}var ae=O(A,2);{var oe=$=>{var V=Yr();Te(V,5,s,Oe,(j,p)=>{var C=de(),P=X(C);{var Q=B=>{var z=Fr(),L=k(z),se=k(L);h(L);var Z=O(L,2);{var ce=J=>{var ee=Hr();ee.__click=[Lr,u,b,p],w(J,ee)};M(Z,J=>{n().isKiller&&J(ce)})}h(z),q(()=>Y(se,`${_(p).name??""} (alias ${_(p).nickname??""})`)),w(B,z)},ne=B=>{var z=Pr(),L=k(z);h(z),q(()=>Y(L,`${_(p).name??""} (alias ${_(p).nickname??""})`)),w(B,z)};M(P,B=>{_(p).alive?B(Q):B(ne,!1)})}w(j,C)}),h(V),w($,V)};M(ae,$=>{s()&&$(oe)})}q(()=>Y(N,`Szia ${n().name??""} `)),w(o,c)},G=o=>{var c=de(),g=X(c);{var N=y=>{var A=qr();Te(A,5,s,Oe,(K,W)=>{var ae=de(),oe=X(ae);{var $=j=>{var p=Jr(),C=k(p),P=k(C,!0);h(C),h(p),q(()=>Y(P,_(W).nickname)),w(j,p)},V=j=>{var p=Xr(),C=k(p,!0);h(p),q(()=>Y(C,_(W).nickname)),w(j,p)};M(oe,j=>{_(W).alive?j($):j(V,!1)})}w(K,ae)}),h(A),w(y,A)};M(g,y=>{s()&&y(N)},!0)}w(o,c)};M(f,o=>{n()?o(D):o(G,!1)})}h(E),h(v),w(e,v),hr()}kr(["click"]);export{at as component};
