import{a as b,t as w,d as pe}from"../chunks/disclose-version.D9qM-ZVJ.js";import{q as H,O as $,ae as Ve,ao as qe,J as Fe,I as Le,H as Oe,am as ke,M as Ge,N as fe,P as ee,V as O,ai as Xe,as as Q,Q as we,R as Te,T as Ye,F as ge,at as Je,au as Qe,al as Ze,av as je,ap as We,aa as $e,X as ea,B as _e,aw as aa,ax as ta,ay as ra,ag as la,az as na,b as ia,aA as sa,p as ie,t as A,i as se,s as I,j as m,k as _,y as Z,D as me,aB as Y,aC as oa,g as ae}from"../chunks/utils.BHoosnMm.js";import{l as va,d as oe,s as B,e as da}from"../chunks/render.B3VTL0sw.js";import{s as Me,i as z,a as K}from"../chunks/props.hptT8Dg9.js";import{s as le,a as ca,r as ua,b as fa}from"../chunks/class.UWU7QJaK.js";import{k as ga,f as xe,i as W,g as j,a as ne,u as Pe,v as _a,b as ma,l as xa,c as ha,d as ba}from"../chunks/api.CnAPgmn7.js";import{d as he,w as be}from"../chunks/index.8bhIGfqS.js";import{P as ya}from"../chunks/PopUp.DO2wrpZ4.js";function pa(a,e){return e}function ka(a,e,t,r){for(var n=[],i=e.length,o=0;o<i;o++)Qe(e[o].e,n,!0);var u=i>0&&n.length===0&&t!==null;if(u){var c=t.parentNode;Ze(c),c.append(t),r.clear(),R(a,e[0].prev,e[i-1].next)}je(n,()=>{for(var x=0;x<i;x++){var k=e[x];u||(r.delete(k.k),R(a,k.prev,k.next)),We(k.e,!u)}})}function wa(a,e,t,r,n,i=null){var o=a,u={flags:e,items:new Map,first:null};{var c=a;o=H?$(Ve(c)):c.appendChild(qe())}H&&Fe();var x=null,k=!1;Le(()=>{var l=t(),f=Oe(l)?l:l==null?[]:ke(l),s=f.length;if(k&&s===0)return;k=s===0;let v=!1;if(H){var M=o.data===Ge;M!==(s===0)&&(o=fe(),$(o),ee(!1),v=!0)}if(H){for(var U=null,D,d=0;d<s;d++){if(O.nodeType===8&&O.data===Xe){o=O,v=!0,ee(!1);break}var S=f[d],P=r(S,d);D=Ee(O,u,U,null,S,P,d,n,e),u.items.set(P,D),U=D}s>0&&$(fe())}if(!H){var h=$e;Ta(f,u,o,n,e,(h.f&Q)!==0,r)}i!==null&&(s===0?x?we(x):x=Te(()=>i(o)):x!==null&&Ye(x,()=>{x=null})),v&&ee(!0),t()}),H&&(o=O)}function Ta(a,e,t,r,n,i,o,u){var c=a.length,x=e.items,k=e.first,l=k,f,s=null,v=[],M=[],U,D,d,S;for(S=0;S<c;S+=1){if(U=a[S],D=o(U,S),d=x.get(D),d===void 0){var P=l?l.e.nodes_start:t;s=Ee(P,e,s,s===null?e.first:s.next,U,D,S,r,n),x.set(D,s),v=[],M=[],l=s.next;continue}if(Ma(d,U,S),d.e.f&Q&&we(d.e),d!==l){if(f!==void 0&&f.has(d)){if(v.length<M.length){var h=M[0],C;s=h.prev;var y=v[0],g=v[v.length-1];for(C=0;C<v.length;C+=1)ye(v[C],h,t);for(C=0;C<M.length;C+=1)f.delete(M[C]);R(e,y.prev,g.next),R(e,s,y),R(e,g,h),l=h,s=g,S-=1,v=[],M=[]}else f.delete(d),ye(d,l,t),R(e,d.prev,d.next),R(e,d,s===null?e.first:s.next),R(e,s,d),s=d;continue}for(v=[],M=[];l!==null&&l.k!==D;)(i||!(l.e.f&Q))&&(f??(f=new Set)).add(l),M.push(l),l=l.next;if(l===null)continue;d=l}v.push(d),s=d,l=d.next}if(l!==null||f!==void 0){for(var T=f===void 0?[]:ke(f);l!==null;)(i||!(l.e.f&Q))&&T.push(l),l=l.next;var N=T.length;if(N>0){var q=c===0?t:null;ka(e,T,q,x)}}ge.first=e.first&&e.first.e,ge.last=s&&s.e}function Ma(a,e,t,r){Je(a.v,e),a.i=t}function Ee(a,e,t,r,n,i,o,u,c,x){var k=(c&ta)!==0,l=(c&ra)===0,f=k?l?ea(n):_e(n):n,s=c&aa?_e(o):o,v={i:s,v:f,k:i,a:null,e:null,prev:t,next:r};try{return v.e=Te(()=>u(a,f,s),H),v.e.prev=t&&t.e,v.e.next=r&&r.e,t===null?e.first=v:(t.next=v,t.e.next=v.e),r!==null&&(r.prev=v,r.e.prev=v.e),v}finally{}}function ye(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,n=e?e.e.nodes_start:t,i=a.e.nodes_start;i!==r;){var o=la(i);n.before(i),i=o}}function R(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Pa(a,e,t=e){var r=na();va(a,"input",n=>{var i=n?a.defaultValue:a.value;if(i=te(a)?re(i):i,t(i),r&&i!==(i=e())){var o=a.selectionStart,u=a.selectionEnd;a.value=i??"",u!==null&&(a.selectionStart=o,a.selectionEnd=Math.min(u,a.value.length))}}),(H&&a.defaultValue!==a.value||ia(e)==null&&a.value)&&t(te(a)?re(a.value):a.value),sa(()=>{var n=e();te(a)&&n===re(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function te(a){var e=a.type;return e==="number"||e==="range"}function re(a){return a===""?null:+a}var Ea=(a,e)=>{e.playerToKill&&ga(e.playerToKill,a)},Ia=()=>{},Sa=w('<div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200">Biztos meg akarod ölni? <br> <div class="*:rounded *:border-2 *:p-1"><button class="bg-red-500">IGEN</button> <button class="bg-green-500"> </button></div></div>');function Ca(a,e){ie(e,!0),ya(a,{get open(){return e.open},children:(t,r)=>{var n=Sa(),i=I(m(n),2),o=I(i),u=m(o);u.__click=[Ea,e];var c=I(u,2);c.__click=[Ia];var x=m(c);_(c),_(o),_(n),A(()=>{var k,l;B(i,` Szerintem ${((k=e.playerToKill)==null?void 0:k.name)??""} nagyon szomorú
        lenne `),B(x,`Nem, mert egy jó ember vagyok és meg akarom kímélni ${((l=e.playerToKill)==null?void 0:l.name)??""}
            életét`)}),b(t,n)},$$slots:{default:!0}}),se()}oe(["click"]);var Da=w('<button aria-label="kill" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-red-500 rounded-full border-2 border-red-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>'),Ua=(a,e)=>{_a(e.thisPlayer,a)},Na=w('<button aria-label="vote" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 12 2 2 4-4"></path><path d="M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"></path><path d="M22 19H2"></path></svg></button>'),za=w('<div class="text-red-500"> </div>'),Aa=w('<div class="flex justify-center"><span class="mr-2"> </span> <!> <!></div>'),Ka=w('<div class="line-through"> </div>'),Ba=w("<div><!></div>");function Ha(a,e){ie(e,!0);const t=Me(),r=()=>K(j,"$gameState",t),n=()=>K(e.killUser,"$killUser",t),i=()=>K(ma,"$votedForId",t),o=()=>K(Pe,"$unixTime",t);var u=Ba(),c=m(u);{var x=l=>{var f=Aa(),s=m(f),v=m(s,!0);A(()=>B(v,xe(e.thisPlayer.name,e.thisPlayer.nickname))),_(s);var M=I(s,2);{var U=P=>{var h=Da();h.__click=C=>{n()==null&&(e.killUser.set(e.thisPlayer),e.killPopUp.set(!0))},b(P,h)},D=P=>{var h=pe(),C=Z(h);{var y=g=>{var T=Na();T.__click=[Ua,e];var N=m(T);_(T),A(()=>ca(N,`lucide lucide-vote text-${(e.thisPlayer.publicID==i()?"green-800":"green-300")??""}`)),b(g,T)};z(C,g=>{r()&&r().player&&W(r().gamedata)&&g(y)},!0)}b(P,h)};z(M,P=>{r().player&&r().player.isKiller&&!W(r().gamedata)&&e.thisPlayer.revealDeath==null?P(U):P(D,!1)})}var d=I(M,2);{var S=P=>{var h=za(),C=m(h,!0);A(()=>B(C,ne(e.thisPlayer.revealDeath-o()).smallString)),_(h),b(P,h)};z(d,P=>{var h;e.thisPlayer.revealDeath&&((h=r().player)!=null&&h.isKiller)&&P(S)})}_(f),b(l,f)},k=l=>{var f=Ka(),s=m(f,!0);A(()=>B(s,xe(e.thisPlayer.name,e.thisPlayer.nickname))),_(f),b(l,f)};z(c,l=>{e.thisPlayer.alive?l(x):l(k,!1)})}_(u),A(()=>le(u,`w-full m-2 rounded-full border-2 max-w-[700px] p-0.5 text-center bg-${(e.thisPlayer.alive?"green-500":"red-500")??""}`)),b(a,u),se()}oe(["click"]);var Ra=w('<div class="min-h-full aspect-4/5 rounded-xl bg-gray-400 flex flex-col mx-1"><div class="flex-1 bg-gray-600 rounded-2xl mx-3 mt-2 flex place-content-center items-center text-5xl *:bg-gray-900 *:m-1 *:p-1 *:py-3 *:rounded"><div> </div> <div> </div></div> <div class=" text-center p-1"> </div></div>');function J(a,e){var t=Ra(),r=m(t),n=m(r),i=m(n,!0);A(()=>B(i,Math.abs(Math.floor(e.number%100/10)))),_(n);var o=I(n,2),u=m(o,!0);A(()=>B(u,Math.abs(e.number%10))),_(o),_(r);var c=I(r,2),x=m(c,!0);_(c),_(t),A(()=>B(x,e.text)),b(a,t)}var Va=w('<form class="text-gray-700"><input type="text" placeholder="írd ide a kódot" class="rounded-xl"> <button type="submit" class="bg-gray-200 ml-4 p-1 rounded-md">Belépés</button></form>'),qa=w('<div title="Te vagy a gyilkos!">Gyilkos</div>'),Fa=w('<div title="Ártatlan vagy">Ártatlan</div>'),La=a=>{xa()},Oa=w('<div class="flex-1 text-white flex place-content-evenly"><!> <!></div>'),Ga=w('<div class="flex-1 text-white flex place-content-evenly relative"><!> <!> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter">Nincs Meeting</div></div>'),Xa=w('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900 ">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-xl  tracking-tighter z-10 text-white">Nem tudsz meetinget hívni</div>',1),Ya=w('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter z-10 text-white">Meeting van</div>',1),Ja=w('<button class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</button>'),Qa=w('<div class="w-full flex justify-center text-white items-center"><div class="bg-gray-700 py-3 px-6 border-gray-800 border-2 rounded-lg relative"><div> </div> <div><!></div> <button class="p-2 border border-gray-800 bg-gray-800 rounded-full aspect-square h-max absolute -right-4 top-3" aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button></div></div> <br> <div class="w-full flex place-content-center h-40 bg-gray-700 rounded-xl border-gray-950 p-4 *:mx-1 lg:py-6 lg:px-4 lg:h-52"><!> <div class="flex-1 flex place-content-center items-center relative text-center"><!></div></div>',1),Za=w('<div class="flex flex-col items-center text-lg text-center"></div>'),ja=w('<div class="max-w-screen p-3 lg:px-96 lg:py-10"><!> <!> <hr class="my-3 mx-10"> <!></div> <!>',1);function it(a,e){ie(e,!0);const t=Me(),r=()=>K(j,"$gameState",t),n=()=>K(s,"$deadStrikeThrough",t),i=()=>K(f,"$color",t),o=()=>K(Pe,"$unixTime",t),u=()=>K(l,"$killUser",t);let c=oa("");function x(){me(c,"")}let k=be(!1),l=be(),f=he(j,y=>{var g;return(g=y.player)!=null&&g.isKiller?"red-500":"green-500"}),s=he(j,y=>{var g;return((g=y.player)==null?void 0:g.revealDeath)==null?"":"line-through"});var v=ja(),M=Z(v),U=m(M);{var D=y=>{var g=Va(),T=m(g);ua(T),fa(T,"maxlength",16),Y(2),_(g),da("submit",g,async N=>{await ha(ae(c),N)}),Pa(T,()=>ae(c),N=>me(c,N)),b(y,g)};z(U,y=>{r().player||y(D)})}var d=I(U,2);{var S=y=>{var g=Qa(),T=Z(g),N=m(T),q=m(N),Ie=m(q,!0);_(q);var G=I(q,2),Se=m(G);{var Ce=p=>{var E=qa();b(p,E)},De=p=>{var E=Fa();b(p,E)};z(Se,p=>{r().player.isKiller?p(Ce):p(De,!1)})}_(G);var Ue=I(G,2);Ue.__click=[La],_(N),_(T);var ve=I(T,4),de=m(ve);{var Ne=p=>{var E=Oa(),V=m(E);J(V,{get number(){return ne(r().gamedata.meetingStart+r().gamedata.meetingLength-o()).mins},text:"Perc"});var L=I(V,2);J(L,{get number(){return ne(r().gamedata.meetingStart+r().gamedata.meetingLength-o()).secs},text:"Másodperc"}),_(E),b(p,E)},ze=p=>{var E=Ga(),V=m(E);J(V,{number:0,text:"Perc"});var L=I(V,2);J(L,{number:0,text:"Másodperc"}),Y(2),_(E),b(p,E)};z(de,p=>{W(r().gamedata)?p(Ne):p(ze,!1)})}var ce=I(de,2),Ae=m(ce);{var Ke=p=>{var E=Xa();Y(2),b(p,E)},Be=p=>{var E=pe(),V=Z(E);{var L=F=>{var X=Ya();Y(2),b(F,X)},He=F=>{var X=Ja();X.__click=function(...Re){var ue;(ue=ba)==null||ue.apply(this,Re)},b(F,X)};z(V,F=>{W(r().gamedata)?F(L):F(He,!1)},!0)}b(p,E)};z(Ae,p=>{r().player.canCallMeeting<=0||!r().player.alive?p(Ke):p(Be,!1)})}_(ce),_(ve),A(()=>{le(q,`${n()??""} text-4xl tracking-wider`),B(Ie,r().player.name),le(G,`text-lg tracking-normal text-${i()??""} ${n()??""} pl-14 -mt-1`)}),b(y,g)};z(d,y=>{r().player&&y(S)})}var P=I(d,4);{var h=y=>{var g=Za();wa(g,5,()=>r().players,pa,(T,N)=>{Ha(T,{killUser:l,killPopUp:k,get thisPlayer(){return ae(N)}})}),_(g),b(y,g)};z(P,y=>{r().players&&y(h)})}_(M);var C=I(M,2);return Ca(C,{open:k,get playerToKill(){return u()}}),b(a,v),se({resetIdTextInput:x})}oe(["click"]);export{it as component};
