import{a as p,t as w,d as ye}from"../chunks/disclose-version.D9qM-ZVJ.js";import{q as H,O as $,ae as Ke,ao as Ve,J as Re,I as qe,H as Fe,am as pe,M as Le,N as ue,P as ee,V as O,ai as Oe,as as Q,Q as ke,R as we,T as Ge,F as fe,at as Xe,au as Ye,al as Je,av as Qe,ap as Ze,aa as je,X as We,B as ge,aw as $e,ax as ea,ay as aa,ag as ta,az as ra,b as la,aA as na,p as ne,t as D,i as ie,s as I,j as _,k as u,y as Z,D as me,aB as Y,aC as ia,g as ae}from"../chunks/utils.BHoosnMm.js";import{l as sa,d as se,s as R,e as oa}from"../chunks/render.B3VTL0sw.js";import{s as Te,i as A,a as K}from"../chunks/props.hptT8Dg9.js";import{s as le,a as va,r as da,b as ca}from"../chunks/class.UWU7QJaK.js";import{k as ua,i as W,g as j,v as fa,b as ga,l as ma,a as _e,u as _a,c as xa,d as ha}from"../chunks/api.D3pvvA3j.js";import{d as xe,w as he}from"../chunks/index.8bhIGfqS.js";import{P as ba}from"../chunks/PopUp.C-9jNpul.js";function ya(a,e){return e}function pa(a,e,t,r){for(var i=[],s=e.length,n=0;n<s;n++)Ye(e[n].e,i,!0);var x=s>0&&i.length===0&&t!==null;if(x){var c=t.parentNode;Je(c),c.append(t),r.clear(),B(a,e[0].prev,e[s-1].next)}Qe(i,()=>{for(var f=0;f<s;f++){var g=e[f];x||(r.delete(g.k),B(a,g.prev,g.next)),Ze(g.e,!x)}})}function ka(a,e,t,r,i,s=null){var n=a,x={flags:e,items:new Map,first:null};{var c=a;n=H?$(Ke(c)):c.appendChild(Ve())}H&&Re();var f=null,g=!1;qe(()=>{var l=t(),m=Fe(l)?l:l==null?[]:pe(l),v=m.length;if(g&&v===0)return;g=v===0;let d=!1;if(H){var T=n.data===Le;T!==(v===0)&&(n=ue(),$(n),ee(!1),d=!0)}if(H){for(var C=null,k,o=0;o<v;o++){if(O.nodeType===8&&O.data===Oe){n=O,d=!0,ee(!1);break}var M=m[o],U=r(M,o);k=Me(O,x,C,null,M,U,o,i,e),x.items.set(U,k),C=k}v>0&&$(ue())}if(!H){var N=je;wa(m,x,n,i,e,(N.f&Q)!==0,r)}s!==null&&(v===0?f?ke(f):f=we(()=>s(n)):f!==null&&Ge(f,()=>{f=null})),d&&ee(!0),t()}),H&&(n=O)}function wa(a,e,t,r,i,s,n,x){var c=a.length,f=e.items,g=e.first,l=g,m,v=null,d=[],T=[],C,k,o,M;for(M=0;M<c;M+=1){if(C=a[M],k=n(C,M),o=f.get(k),o===void 0){var U=l?l.e.nodes_start:t;v=Me(U,e,v,v===null?e.first:v.next,C,k,M,r,i),f.set(k,v),d=[],T=[],l=v.next;continue}if(Ta(o,C,M),o.e.f&Q&&ke(o.e),o!==l){if(m!==void 0&&m.has(o)){if(d.length<T.length){var N=T[0],E;v=N.prev;var b=d[0],h=d[d.length-1];for(E=0;E<d.length;E+=1)be(d[E],N,t);for(E=0;E<T.length;E+=1)m.delete(T[E]);B(e,b.prev,h.next),B(e,v,b),B(e,h,N),l=N,v=h,M-=1,d=[],T=[]}else m.delete(o),be(o,l,t),B(e,o.prev,o.next),B(e,o,v===null?e.first:v.next),B(e,v,o),v=o;continue}for(d=[],T=[];l!==null&&l.k!==k;)(s||!(l.e.f&Q))&&(m??(m=new Set)).add(l),T.push(l),l=l.next;if(l===null)continue;o=l}d.push(o),v=o,l=o.next}if(l!==null||m!==void 0){for(var S=m===void 0?[]:pe(m);l!==null;)(s||!(l.e.f&Q))&&S.push(l),l=l.next;var z=S.length;if(z>0){var q=c===0?t:null;pa(e,S,q,f)}}fe.first=e.first&&e.first.e,fe.last=v&&v.e}function Ta(a,e,t,r){Xe(a.v,e),a.i=t}function Me(a,e,t,r,i,s,n,x,c,f){var g=(c&ea)!==0,l=(c&aa)===0,m=g?l?We(i):ge(i):i,v=c&$e?ge(n):n,d={i:v,v:m,k:s,a:null,e:null,prev:t,next:r};try{return d.e=we(()=>x(a,m,v),H),d.e.prev=t&&t.e,d.e.next=r&&r.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function be(a,e,t){for(var r=a.next?a.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=a.e.nodes_start;s!==r;){var n=ta(s);i.before(s),s=n}}function B(a,e,t){e===null?a.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Ma(a,e,t=e){var r=ra();sa(a,"input",i=>{var s=i?a.defaultValue:a.value;if(s=te(a)?re(s):s,t(s),r&&s!==(s=e())){var n=a.selectionStart,x=a.selectionEnd;a.value=s??"",x!==null&&(a.selectionStart=n,a.selectionEnd=Math.min(x,a.value.length))}}),(H&&a.defaultValue!==a.value||la(e)==null&&a.value)&&t(te(a)?re(a.value):a.value),na(()=>{var i=e();te(a)&&i===re(a.value)||a.type==="date"&&!i&&!a.value||i!==a.value&&(a.value=i??"")})}function te(a){var e=a.type;return e==="number"||e==="range"}function re(a){return a===""?null:+a}var Pa=(a,e)=>{e.playerToKill&&ua(e.playerToKill,a)},Ea=()=>{},Ia=w('<div class="text-gray-200 bg-gray-700 p-3 rounded-lg border-2 border-gray-200">Biztos meg akarod ölni? <br> <div class="*:rounded *:border-2 *:p-1"><button class="bg-red-500">IGEN</button> <button class="bg-green-500"> </button></div></div>');function Sa(a,e){ne(e,!0),ba(a,{get open(){return e.open},children:(t,r)=>{var i=Ia(),s=I(_(i),2);s.nodeValue=` Szerintem akit meg akar ölni a neve nagyon szomorú
        lenne `;var n=I(s),x=_(n);x.__click=[Pa,e];var c=I(x,2);c.__click=[Ea];var f=_(c);u(c),u(n),u(i),D(()=>{var g;return R(f,`Nem, mert egy jó ember vagyok és meg akarom kímélni ${((g=e.playerToKill)==null?void 0:g.name)??""}
            életét`)}),p(t,i)},$$slots:{default:!0}}),ie()}se(["click"]);var Ca=w('<button aria-label="kill" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x text-red-500 rounded-full border-2 border-red-500"><path d="M18 6 6 18"></path><path d="m6 6 12 12"></path></svg></button>'),Na=(a,e)=>{fa(e.thisPlayer,a)},za=w('<button aria-label="vote" class=" flex items-center mx-5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 12 2 2 4-4"></path><path d="M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z"></path><path d="M22 19H2"></path></svg></button>'),Aa=w('<div class="flex justify-center"><span class="mr-2"> </span> <!></div>'),Da=w("<div> </div>"),Ua=w("<div><!></div>");function Ha(a,e){ne(e,!0);const t=Te(),r=()=>K(j,"$gameState",t),i=()=>K(e.killUser,"$killUser",t),s=()=>K(ga,"$votedForId",t);var n=Ua(),x=_(n);{var c=g=>{var l=Aa(),m=_(l),v=_(m,!0);u(m);var d=I(m,2);{var T=k=>{var o=Ca();o.__click=M=>{i()==null&&e.killUser.set(e.thisPlayer)},p(k,o)},C=k=>{var o=ye(),M=Z(o);{var U=N=>{var E=za();E.__click=[Na,e];var b=_(E);u(E),D(()=>va(b,`lucide lucide-vote text-${(e.thisPlayer.publicID==s()?"green-800":"green-300")??""}`)),p(N,E)};A(M,N=>{r()&&r().player&&W(r().gamedata)&&N(U)},!0)}p(k,o)};A(d,k=>{r().player&&r().player.isKiller&&!W(r().gamedata)&&e.thisPlayer.revealDeath==null?k(T):k(C,!1)})}u(l),D(()=>R(v,e.thisPlayer.name?e.thisPlayer.name:e.thisPlayer.nickname)),p(g,l)},f=g=>{var l=Da(),m=_(l,!0);u(l),D(()=>R(m,e.thisPlayer.name?`${e.thisPlayer.name} (${e.thisPlayer.nickname})`:e.thisPlayer.nickname)),p(g,l)};A(x,g=>{e.thisPlayer.alive?g(c):g(f,!1)})}u(n),D(()=>le(n,`w-full m-2 rounded-full border-2 max-w-[700px] p-0.5 text-center bg-${(e.thisPlayer.alive?"green-500":"red-500")??""}`)),p(a,n),ie()}se(["click"]);var Ba=w('<div class="min-h-full aspect-4/5 rounded-xl bg-gray-400 flex flex-col mx-1"><div class="flex-1 bg-gray-600 rounded-2xl mx-3 mt-2 flex place-content-center items-center text-5xl *:bg-gray-900 *:m-1 *:p-1 *:py-3 *:rounded"><div> </div> <div> </div></div> <div class=" text-center p-1"> </div></div>');function J(a,e){var t=Ba(),r=_(t),i=_(r),s=_(i,!0);D(()=>R(s,Math.abs(Math.floor(e.number%100/10)))),u(i);var n=I(i,2),x=_(n,!0);D(()=>R(x,Math.abs(e.number%10))),u(n),u(r);var c=I(r,2),f=_(c,!0);u(c),u(t),D(()=>R(f,e.text)),p(a,t)}var Ka=w('<form class="text-gray-700"><input type="text" placeholder="írd ide a kódot" class="rounded-xl"> <button type="submit" class="bg-gray-200 ml-4 p-1 rounded-md">Belépés</button></form>'),Va=w('<div title="Te vagy a gyilkos!">Gyilkos</div>'),Ra=w('<div title="Ártatlan vagy">Ártatlan</div>'),qa=a=>{ma()},Fa=w('<div class="flex-1 text-white flex place-content-evenly"><!> <!></div>'),La=w('<div class="flex-1 text-white flex place-content-evenly relative"><!> <!> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter">Nincs Meeting</div></div>'),Oa=w('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900 ">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-xl  tracking-tighter z-10 text-white">Nem tudsz meetinget hívni</div>',1),Ga=w('<div class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</div> <div class="absolute w-full backdrop-blur-sm h-[calc(100%+16px)] rounded-2xl -top-2 bg-gray-600/50 flex items-center place-content-center text-3xl tracking-tighter z-10 text-white">Meeting van</div>',1),Xa=w('<button class="aspect-square min-h-full bg-red-500 rounded-full flex items-center place-content-center text-xl z-10 border-l-8 border-b-8 border-red-900">Meeting</button>'),Ya=w('<div class="w-full flex justify-center text-white items-center"><div class="bg-gray-700 py-3 px-6 border-gray-800 border-2 rounded-lg relative"><div> </div> <div><!></div> <button class="p-2 border border-gray-800 bg-gray-800 rounded-full aspect-square h-max absolute -right-4 top-3" aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button></div></div> <br> <div class="w-full flex place-content-center h-40 bg-gray-700 rounded-xl border-gray-950 p-4 *:mx-1 lg:py-6 lg:px-4 lg:h-52"><!> <div class="flex-1 flex place-content-center items-center relative text-center"><!></div></div>',1),Ja=w('<div class="flex flex-col items-center text-lg text-center"></div>'),Qa=w('<div class="max-w-screen p-3 lg:px-96 lg:py-10"><!> <!> <hr class="my-3 mx-10"> <!></div> <!>',1);function lt(a,e){ne(e,!0);const t=Te(),r=()=>K(j,"$gameState",t),i=()=>K(v,"$deadStrikeThrough",t),s=()=>K(m,"$color",t),n=()=>K(_a,"$unixTime",t),x=()=>K(l,"$killUser",t);let c=ia("");function f(){me(c,"")}let g=he(!1),l=he(),m=xe(j,b=>{var h;return(h=b.player)!=null&&h.isKiller?"red-500":"green-500"}),v=xe(j,b=>{var h;return((h=b.player)==null?void 0:h.revealDeath)==null?"":"line-through"});var d=Qa(),T=Z(d),C=_(T);{var k=b=>{var h=Ka(),S=_(h);da(S),ca(S,"maxlength",16),Y(2),u(h),oa("submit",h,async z=>{await xa(ae(c),z)}),Ma(S,()=>ae(c),z=>me(c,z)),p(b,h)};A(C,b=>{r().player||b(k)})}var o=I(C,2);{var M=b=>{var h=Ya(),S=Z(h),z=_(S),q=_(z),Pe=_(q,!0);u(q);var G=I(q,2),Ee=_(G);{var Ie=y=>{var P=Va();p(y,P)},Se=y=>{var P=Ra();p(y,P)};A(Ee,y=>{r().player.isKiller?y(Ie):y(Se,!1)})}u(G);var Ce=I(G,2);Ce.__click=[qa],u(z),u(S);var oe=I(S,4),ve=_(oe);{var Ne=y=>{var P=Fa(),V=_(P);J(V,{get number(){return _e(r().gamedata.meetingStart+r().gamedata.meetingLength-n()).mins},text:"Perc"});var L=I(V,2);J(L,{get number(){return _e(r().gamedata.meetingStart+r().gamedata.meetingLength-n()).secs},text:"Másodperc"}),u(P),p(y,P)},ze=y=>{var P=La(),V=_(P);J(V,{number:0,text:"Perc"});var L=I(V,2);J(L,{number:0,text:"Másodperc"}),Y(2),u(P),p(y,P)};A(ve,y=>{W(r().gamedata)?y(Ne):y(ze,!1)})}var de=I(ve,2),Ae=_(de);{var De=y=>{var P=Oa();Y(2),p(y,P)},Ue=y=>{var P=ye(),V=Z(P);{var L=F=>{var X=Ga();Y(2),p(F,X)},He=F=>{var X=Xa();X.__click=function(...Be){var ce;(ce=ha)==null||ce.apply(this,Be)},p(F,X)};A(V,F=>{W(r().gamedata)?F(L):F(He,!1)},!0)}p(y,P)};A(Ae,y=>{r().player.canCallMeeting<=0?y(De):y(Ue,!1)})}u(de),u(oe),D(()=>{le(q,`${i()??""} text-4xl tracking-wider`),R(Pe,r().player.name),le(G,`text-lg tracking-normal text-${s()??""} ${i()??""} pl-14 -mt-1`)}),p(b,h)};A(o,b=>{r().player&&b(M)})}var U=I(o,4);{var N=b=>{var h=Ja();ka(h,5,()=>r().players,ya,(S,z)=>{Ha(S,{killUser:l,get thisPlayer(){return ae(z)}})}),u(h),p(b,h)};A(U,b=>{r().players&&b(N)})}u(T);var E=I(T,2);return Sa(E,{open:g,get playerToKill(){return x()}}),p(a,d),ie({resetIdTextInput:f})}se(["click"]);export{lt as component};
