import{a as w,t as U,d as P,c as Me}from"../chunks/disclose-version.KCFXmJnZ.js";import{h as I,B as q,K as je,J as Be,z as Le,b as He,y as ze,aa as be,H as Fe,A as de,C as X,f as j,a6 as Ye,ac as F,D as ye,d as ke,F as Ke,v as ve,ad as Ge,ae as Je,a9 as Pe,af as qe,e as Xe,$ as We,I as Qe,k as ue,ag as Ze,ah as er,ai as rr,a4 as tr,aj as ar,x as nr,ak as sr,al as ir,am as or,a as lr,an as cr,p as fr,i as dr,q as B,t as T,ao as _e,W as L,X as R,Y as $,g as he,V as W}from"../chunks/runtime.qgzTVW-P.js";import{a as vr,l as ur,d as _r,e as hr,s as Q}from"../chunks/render.DZ9a-FsG.js";import{s as pr,i as O,p as gr,a as pe}from"../chunks/store.0YlUkalQ.js";import{o as mr}from"../chunks/index-client.0A_dy4mZ.js";import{w as we}from"../chunks/index.zR3LeMTC.js";function xr(e,r){return r}function br(e,r,t,i){for(var a=[],s=r.length,o=0;o<s;o++)Je(r[o].e,a,!0);var p=s>0&&a.length===0&&t!==null;if(p){var m=t.parentNode;Pe(m),m.append(t),i.clear(),D(e,r[0].prev,r[s-1].next)}qe(a,()=>{for(var v=0;v<s;v++){var b=r[v];p||(i.delete(b.k),D(e,b.prev,b.next)),Xe(b.e,!p)}})}function yr(e,r,t,i,a,s=null){var o=e,p={flags:r,items:new Map,first:null};{var m=e;o=I?q(je(m)):m.appendChild(Be())}I&&Le();var v=null,b=!1;He(()=>{var l=t(),u=ze(l)?l:l==null?[]:be(l),c=u.length;if(b&&c===0)return;b=c===0;let d=!1;if(I){var y=o.data===Fe;y!==(c===0)&&(o=de(),q(o),X(!1),d=!0)}if(I){for(var A=null,k,n=0;n<c;n++){if(j.nodeType===8&&j.data===Ye){o=j,d=!0,X(!1);break}var f=u[n],_=i(f,n);k=Ie(j,p,A,null,f,_,n,a,r),p.items.set(_,k),A=k}c>0&&q(de())}if(!I){var g=We;kr(u,p,o,a,r,(g.f&F)!==0,i)}s!==null&&(c===0?v?ye(v):v=ke(()=>s(o)):v!==null&&Ke(v,()=>{v=null})),d&&X(!0),t()}),I&&(o=j)}function kr(e,r,t,i,a,s,o,p){var m=e.length,v=r.items,b=r.first,l=b,u,c=null,d=[],y=[],A,k,n,f;for(f=0;f<m;f+=1){if(A=e[f],k=o(A,f),n=v.get(k),n===void 0){var _=l?l.e.nodes_start:t;c=Ie(_,r,c,c===null?r.first:c.next,A,k,f,i,a),v.set(k,c),d=[],y=[],l=c.next;continue}if(wr(n,A,f),n.e.f&F&&ye(n.e),n!==l){if(u!==void 0&&u.has(n)){if(d.length<y.length){var g=y[0],h;c=g.prev;var E=d[0],V=d[d.length-1];for(h=0;h<d.length;h+=1)ge(d[h],g,t);for(h=0;h<y.length;h+=1)u.delete(y[h]);D(r,E.prev,V.next),D(r,c,E),D(r,V,g),l=g,c=V,f-=1,d=[],y=[]}else u.delete(n),ge(n,l,t),D(r,n.prev,n.next),D(r,n,c===null?r.first:c.next),D(r,c,n),c=n;continue}for(d=[],y=[];l!==null&&l.k!==k;)(s||!(l.e.f&F))&&(u??(u=new Set)).add(l),y.push(l),l=l.next;if(l===null)continue;n=l}d.push(n),c=n,l=n.next}if(l!==null||u!==void 0){for(var M=u===void 0?[]:be(u);l!==null;)(s||!(l.e.f&F))&&M.push(l),l=l.next;var K=M.length;if(K>0){var G=m===0?t:null;br(r,M,G,v)}}ve.first=r.first&&r.first.e,ve.last=c&&c.e}function wr(e,r,t,i){Ge(e.v,r),e.i=t}function Ie(e,r,t,i,a,s,o,p,m,v){var b=(m&er)!==0,l=(m&rr)===0,u=b?l?Qe(a):ue(a):a,c=m&Ze?ue(o):o,d={i:c,v:u,k:s,a:null,e:null,prev:t,next:i};try{return d.e=ke(()=>p(e,u,c),I),d.e.prev=t&&t.e,d.e.next=i&&i.e,t===null?r.first=d:(t.next=d,t.e.next=d.e),i!==null&&(i.prev=d,i.e.prev=d.e),d}finally{}}function ge(e,r,t){for(var i=e.next?e.next.e.nodes_start:t,a=r?r.e.nodes_start:t,s=e.e.nodes_start;s!==i;){var o=tr(s);a.before(s),s=o}}function D(e,r,t){r===null?e.first=t:(r.next=t,r.e.next=t&&t.e),t!==null&&(t.prev=r,t.e.prev=r&&r.e)}function Ir(e){if(I){var r=!1,t=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var i=e.value;ae(e,"value",null),e.value=i}if(e.hasAttribute("checked")){var a=e.checked;ae(e,"checked",null),e.checked=a}}};e.__on_r=t,ar(t),vr()}}function ae(e,r,t,i){var a=e.__attributes??(e.__attributes={});I&&(a[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||a[r]!==(a[r]=t)&&(r==="style"&&"__styles"in e&&(e.__styles={}),r==="loading"&&(e[sr]=t),t==null?e.removeAttribute(r):typeof t!="string"&&Ar(e).includes(r)?e[r]=t:e.setAttribute(r,t))}var me=new Map;function Ar(e){var r=me.get(e.nodeName);if(r)return r;me.set(e.nodeName,r=[]);for(var t,i=e,a=Element.prototype;a!==i;){t=ir(i);for(var s in t)t[s].set&&r.push(s);i=nr(i)}return r}function Er(e,r,t=r){var i=or();ur(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=Z(e)?ee(s):s,t(s),i&&s!==(s=r())){var o=e.selectionStart,p=e.selectionEnd;e.value=s??"",p!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(p,e.value.length))}}),(I&&e.defaultValue!==e.value||lr(r)==null&&e.value)&&t(Z(e)?ee(e.value):e.value),cr(()=>{var a=r();Z(e)&&a===ee(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function Z(e){var r=e.type;return r==="number"||r==="range"}function ee(e){return e===""?null:+e}let re=we(void 0),te=we(void 0),Y="http://0.0.0.0:3000/";async function Cr(){let e=await fetch("./ip");e.ok&&(Y=await e.text())}/*! typescript-cookie v1.0.6 | MIT */const Ae=e=>encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ee=e=>encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent),se=decodeURIComponent,ie=e=>(e[0]==='"'&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent));function Tr(e){return e=Object.assign({},e),typeof e.expires=="number"&&(e.expires=new Date(Date.now()+e.expires*864e5)),e.expires!=null&&(e.expires=e.expires.toUTCString()),Object.entries(e).filter(([r,t])=>t!=null&&t!==!1).map(([r,t])=>t===!0?`; ${r}`:`; ${r}=${t.split(";")[0]}`).join("")}function Ce(e,r,t){const i=/(?:^|; )([^=]*)=([^;]*)/g,a={};let s;for(;(s=i.exec(document.cookie))!=null;)try{const o=t(s[1]);if(a[o]=r(s[2],o),e===o)break}catch{}return e!=null?a[e]:a}const xe=Object.freeze({decodeName:se,decodeValue:ie,encodeName:Ae,encodeValue:Ee}),oe=Object.freeze({path:"/"});function le(e,r,t=oe,{encodeValue:i=Ee,encodeName:a=Ae}={}){return document.cookie=`${a(e)}=${i(r,e)}${Tr(t)}`}function Te(e,{decodeValue:r=ie,decodeName:t=se}={}){return Ce(e,r,t)}function Dr({decodeValue:e=ie,decodeName:r=se}={}){return Ce(void 0,e,r)}function De(e,r=oe){le(e,"",Object.assign({},r,{expires:-1}))}function ne(e,r){const t={set:function(a,s,o){return le(a,s,Object.assign({},this.attributes,o),{encodeValue:this.converter.write})},get:function(a){if(arguments.length===0)return Dr(this.converter.read);if(a!=null)return Te(a,this.converter.read)},remove:function(a,s){De(a,Object.assign({},this.attributes,s))},withAttributes:function(a){return ne(this.converter,Object.assign({},this.attributes,a))},withConverter:function(a){return ne(Object.assign({},this.converter,a),this.attributes)}},i={attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(e)}};return Object.create(t,i)}ne({read:xe.decodeValue,write:xe.encodeValue},oe);var Nr=U('<form class="text-gray-700"><input type="text" placeholder="írd ide a kódot"></form>'),Or=(e,r,t)=>{r(e,T(t))},Ur=U("<button>megölés</button>"),Vr=U('<div class="bg-green-500"> <!></div>'),Sr=U('<div class="bg-red-500"> </div>'),Rr=U('<div class="flex flex-col items-center text-lg *:w-full *:m-2 text-center *:border  *:rounded-full *:border-2"></div>'),$r=U('<button aria-label="logout"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" x2="9" y1="12" y2="12"></line></svg></button> <br> <!> <br> <!> <!>',1),Mr=U('<div class="w-screen h-screen flex place-content-center items-center bg-gray-800"><div class="max-w-screen max-h-screen bg-gray-700 rounded-2xl p-6 m-5 h-[90vh] aspect-9/16 md:aspect-12/9 border border-gray-400 text-gray-200"><!> <!></div></div>');function Yr(e,r){fr(r,!0);const t=pr(),i=()=>pe(re,"$thisUser",t),a=()=>pe(te,"$otherUsers",t);let s=_e(""),o=_e(!1),p;mr(()=>{Cr();let n=Te("id");n&&(B(s,gr(n)),m())});let m=async n=>{if(n&&n.preventDefault(),T(s).length==16){let f=await fetch(Y+"id/"+T(s));if(f.ok){let _=await f.text();B(o,!0),re.set(JSON.parse(_)),le("id",T(s)),v(),p=setInterval(v,5e3)}}},v=async n=>{var _;n&&n.preventDefault();let f=await fetch(Y+"players");if(f.ok){let g=await f.text(),h=JSON.parse(g);if(h){for(let E=0;E<h.length;E++)((_=i())==null?void 0:_.publicID)==h[E].publicID&&h.splice(E,1);te.set(h)}}},b=async(n,f)=>{var g;n.preventDefault(),(await fetch(Y+"kill/"+f.publicID,{method:"POST",body:(g=i())==null?void 0:g.id})).ok||console.error(`error killing ${f.name}`),v(n)},l=n=>{n&&n.preventDefault(),re.set(void 0),te.set(void 0),B(s,""),B(o,!1),De("id"),clearInterval(p)};var u=Mr(),c=L(u),d=L(c);{var y=n=>{var f=Nr(),_=L(f);Ir(_),ae(_,"maxlength",16),R(f),hr("submit",f,m),Er(_,()=>T(s),g=>B(s,g)),w(n,f)};O(d,n=>{T(o)||n(y)})}var A=$(d,2);{var k=n=>{var f=$r(),_=he(f);_.__click=l;var g=$(_,3),h=$(g);{var E=x=>{var C=P("halott vagy:(");w(x,C)};O(h,x=>{i().alive||x(E)})}var V=$(h,4);{var M=x=>{var C=P("NEM te vagy a gyilkos");w(x,C)},K=x=>{var C=P("TE VAGY A GYILKOS");w(x,C)};O(V,x=>{i().isKiller?x(K,!1):x(M)})}var G=$(V,2);{var Ne=x=>{var C=Rr();yr(C,5,a,xr,(Oe,H)=>{var ce=Me(),Ue=he(ce);{var Ve=S=>{var N=Vr(),z=L(N),Re=$(z);{var $e=J=>{var fe=Ur();fe.__click=[Or,b,H],w(J,fe)};O(Re,J=>{i().isKiller&&J($e)})}R(N),W(()=>Q(z,`${T(H).name??""} `)),w(S,N)},Se=S=>{var N=Sr(),z=L(N,!0);R(N),W(()=>Q(z,T(H).name)),w(S,N)};O(Ue,S=>{T(H).alive?S(Ve):S(Se,!1)})}w(Oe,ce)}),R(C),w(x,C)};O(G,x=>{a()&&x(Ne)})}W(()=>Q(g,` Szia ${i().name??""} `)),w(n,f)};O(A,n=>{i()&&n(k)})}R(c),R(u),w(e,u),dr()}_r(["click"]);export{Yr as component};
